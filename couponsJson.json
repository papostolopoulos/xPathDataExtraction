/* 1-800-PET-MEDS 1800petmeds.com */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "eb28555e-366d-4f1a-8b60-49390fe22cfc",
        "repeating": true,
        "locations": [
          "/descendant::img[contains(translate(@alt,\"OF\",\"of\"),\" off\") and (contains(@alt, \"%\") or contains(@alt, \"$\")) or\ncontains(translate(@alt,\"BOG\",\"bog\"),\"bogo\")] |\n/descendant::text()[contains(translate(.,\"FRESHIP\",\"freship\"),\"free ship\")]/ancestor::table[1][contains(translate(.,\"FRESHIPNGOVR\",\"freshipngovr\"),\"free shipping over\")] |\n/descendant::text()[contains(translate(.,\"YOUSAVE\",\"yousave\"),\"you save\")]/ancestor::table[1]"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@alt | ."
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  var replaceArr = [\n    {oldStr: /100% Satisfaction Guaranteed/, newStr: \"\"},\n    {oldStr: /(Easy\\s*Refill\\*|w\\/coupon:|w\\/25%\\s*OFF:)/, newStr: \"\"},\n    {oldStr: /([a-z\\d])([A-Z])/g, newStr: \"$1 $2\"}\n  ];\n  \n  replaceArr.forEach(function(el){\n    data = data.replace(el.oldStr, el.newStr);\n  });\n  \n  return data.trim() || \"\";\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./parent::a/@href | ./descendant::a/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_footer": "/descendant::text()[contains(.,\"PetMed Express\")]/ancestor::table[2]"
        }
      },
      {
        "id": "c4028aff-dfa7-446d-987d-2592e58ec69c",
        "repeating": true,
        "locations": [
          "/descendant::img[contains(translate(@alt,\"OF\",\"of\"),\" off\") and (contains(@alt, \"%\") or contains(@alt, \"$\")) or\ncontains(translate(@alt,\"BOG\",\"bog\"),\"bogo\")] |\n/descendant::text()[contains(translate(.,\"FRESHIP\",\"freship\"),\"free ship\")]/ancestor::table[1][contains(translate(.,\"FRESHIPNGOVR\",\"freshipngovr\"),\"free shipping over\")]"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": null,
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"1-800-PetMeds\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      },
      {
        "id": "3df8e88e-7241-4b74-b694-bd4aeb12482e",
        "repeating": true,
        "locations": [
          "/descendant::img"
        ],
        "type": "http://schema.org/ImageObject",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@src"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "eb28555e-366d-4f1a-8b60-49390fe22cfc",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "c4028aff-dfa7-446d-987d-2592e58ec69c",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      },
      {
        "from": {
          "entityRule": "eb28555e-366d-4f1a-8b60-49390fe22cfc",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "3df8e88e-7241-4b74-b694-bd4aeb12482e",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/image",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

/* ARGOS LTD mail.argos.co.uk */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "8601bf26-d831-4e93-92b2-f4cf550fc8e1",
        "repeating": true,
        "locations": [
          "/descendant::a[following::a[9][contains(.,\"%\")]] \n| \n/descendant::a[following::a[6][contains(.,\"Original Price\")]]\n"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "concat(.,./following::a[3],./following::a[6],./following::a[9])"
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  if(!data) return \"\";\n  return data.replace(/[\\*©®ǂ†→§¹]/g, \"\").replace(/Was\\s£\\d{1,2}\\.\\d{2}/, \"-\");\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_footer": "/descendant::td[contains(.,\"Argos Ltd\")]/descendant::p/parent::td"
        },
        "hintsJavascript": null
      },
      {
        "id": "b6596795-2303-4f35-8674-3c11318d5031",
        "repeating": true,
        "locations": [
          "/descendant::a[following::a[9][contains(.,\"%\")]] \n| \n/descendant::a[following::a[6][contains(.,\"Original Price\")]]\n"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": null,
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"Argos\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "8601bf26-d831-4e93-92b2-f4cf550fc8e1",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "b6596795-2303-4f35-8674-3c11318d5031",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

/* BANANA REPUBLIC FACTORY email.bananarepublicfactory.com */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "50363e07-21ee-4aba-993c-28d55a4d5ec8",
        "repeating": true,
        "locations": [
          "/descendant::text()[(contains(translate(.,\"OF\",\"of\"),\" off\") or contains(translate(.,\"WIN\",\"win\"),\"win\") or contains(translate(.,\"CLEARN\",\"clearn\"),\"clearance\")) and \n(contains(.,\"%\") or contains(.,\"$\")) or \ncontains(translate(.,\"FROM\",\"from\"),\"from $\") or\ncontains(translate(.,\"DORBUSTE\",\"dorbuste\"),\"doorbuster\") or\ncontains(translate(.,\"FRE\",\"fre\"),\"free\") or contains(.,\"%\")][parent::b or parent::td][not(contains(translate(.,\"TRANSFERABL\",\"transferabl\"),\"transferable\"))]"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "."
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  if(!data) return null;\n  \n  var replaceArr = [\n  {oldStr: /[\\*©®ǂ‡†±→§™¹›]/g, newStr: \"\"},\n  {oldStr: /^\\//i, newStr: \"\"},\n  {oldStr: /(:\\s*)?Excludes.*/, newStr: \"\"},\n  {oldStr: /^Everyday\\s*Free\\s*Shipping\\s*$/i, newStr: \"Everyday Free Shipping on orders of $100 or more\"},\n  {oldStr: /:\\s*$/i, newStr: \"\"},\n  ];\n  \n  replaceArr.forEach(function(el){\n    data = data.replace(el.oldStr, el.newStr);\n  });\n  \n  return data.trim();\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./following::text()[contains(translate(.,\"VALID\",\"valid\"),\"valid\")]"
                }
              ]
            },
            "name": "http://schema.org/validThrough",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  return data.match(/through\\s*(\\d{1,2}\\/){2}\\d{2,4}/)[0].replace(/through\\s*((\\d{1,2}\\/){2}\\d{2,4})/, \"$1\") || null;\n}",
            "dataTypes": [
              "DateTime"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "/descendant::a[contains(translate(.,\"BROWSE\",\"browse\"),\"browser\")]/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_footer": "/descendant::text()[contains(translate(., 'BANREPULICFTOY', 'banrepulicftoy'), 'banana republic factory') and contains(.,\"unsubscribe\")]/ancestor::table[1]",
          "_raw_validThrough": "./following::text()"
        }
      },
      {
        "id": "62cf8eea-1ff8-4f2e-8950-39a5988d7a3d",
        "repeating": true,
        "locations": [
          "/descendant::img[contains(translate(@alt,\"OF\",\"of\"),\" off\") and (contains(@alt,\"%\") or contains(@alt,\"$\")) or\ncontains(translate(@alt,\"FRESHIP\",\"freship\"),\"free ship\") and\nancestor::td[@class=\"mobile-hidden\"] or\ncontains(translate(@alt,\"COUPN\",\"coupn\"),\"coupon\") or\ncontains(translate(@alt,\"SAVING\",\"saving\"),\"savings\") or \ncontains(translate(@alt,\"DOR\",\"dor\"),\"door\") and contains(translate(@alt,\"DEAL\",\"deal\"),\"deal\")] \n\n|\n/descendant::text()[(contains(translate(.,\"OF\",\"of\"),\" off\") or contains(translate(.,\"WIN\",\"win\"),\"win\") or contains(translate(.,\"CLEARN\",\"clearn\"),\"clearance\")) and \n(contains(.,\"%\") or contains(.,\"$\")) or \ncontains(translate(.,\"FROM\",\"from\"),\"from $\") or\ncontains(translate(.,\"DORBUSTE\",\"dorbuste\"),\"doorbuster\") or\ncontains(translate(.,\"FRE\",\"fre\"),\"free\")][parent::b]"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"BANANA REPUBLIC\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      },
      {
        "id": "5eab43d6-3d9c-4dd8-8dc5-60a2e91898a4",
        "repeating": true,
        "locations": [
          "/descendant::img"
        ],
        "type": "http://schema.org/ImageObject",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@src"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@title | ./@alt"
                }
              ]
            },
            "name": "http://schema.org/_imgtext",
            "relative": true,
            "transient": true,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "50363e07-21ee-4aba-993c-28d55a4d5ec8",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "62cf8eea-1ff8-4f2e-8950-39a5988d7a3d",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      },
      {
        "from": {
          "entityRule": "50363e07-21ee-4aba-993c-28d55a4d5ec8",
          "matchAttr": "http://schema.org/description"
        },
        "to": {
          "entityRule": "5eab43d6-3d9c-4dd8-8dc5-60a2e91898a4",
          "matchAttr": "http://schema.org/_imgtext"
        },
        "predicate": "http://schema.org/image",
        "cardinality": "ONE_TO_ONE",
        "matchThreshold": "0.3"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

/* BELK belkemail.com */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org"
      }
    ],
    "entityRules": [
      {
        "id": "96b510fd-70f9-4e68-868e-92d82710889c",
        "repeating": true,
        "locations": [
          "/descendant::img[contains(translate(@alt,\"OF\",\"of\"),\" off\") and \n(contains(@alt,\"%\") or contains(@alt,\"$\")) or\ncontains(translate(@alt,\"FRE\",\"fre\"),\"free\")][not(contains(translate(@alt,\"INSTOREPCKU\",\"instorepcku\"),\"in-store pickup\"))]\n|\n/descendant::text()[contains(translate(.,\"FRESHIPNG\",\"freshipng\"),\"free shipping\") or contains(translate(.,\"FRELANCOMGIFT\",\"frelancomgift\"),\"free lancome gift\")]/ancestor::p"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@alt | ."
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data) {\n  var replaceArr = [\n    {oldStr: /^◊+/i, newStr:\"\"},\n    {oldStr: /(-Shop\\s*now|Learn\\s*more|One\\s*per\\s*customer,\\s*please)\\.?/i, newStr: \"\"}\n  ];\n\n  replaceArr.forEach(function(el) {\n    data = data.replace(el.oldStr, el.newStr);\n  });\n\n  while (data.length > 100 && data.indexOf(\".\") !== data.lastIndexOf(\".\")) {\n    data = data.slice(0, data.lastIndexOf(\".\", data.lastIndexOf(\".\") - 1) + 1);\n  }\n\n  return data.trim();\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./parent::a/@href | /descendant::a[contains(translate(.,\"CLIKHER\",\"clikher\"),\"click here\")][parent::td[contains(translate(.,\"CANTSEIMAGS\",\"cantseimags\"),\"can't see images?\")]]"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "concat(./@alt, ., \"~~~\", /descendant::text()[contains(.,\"belkemail.com\")]/ancestor::table)"
                }
              ]
            },
            "name": "http://schema.org/validThrough",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  var dataSpl = data.split(\"~~~\");\n\n  if (dataSpl[0].toLowerCase().indexOf(\"$10 off $50\") !== -1) {\n    dataSpl[1] = dataSpl[1].slice(dataSpl[1].toLowerCase().indexOf(\"$10 off $50\"));\n    return dataSpl[1].match(/Valid\\s*(January|February|March|April|May|June|July|August|September|October|November|December)\\s*\\d{1,2}-(\\d{1,2}),?\\s*(\\d{2,4})/)[0].replace(/Valid\\s*(January|February|March|April|May|June|July|August|September|October|November|December)\\s*\\d{1,2}-(\\d{1,2}),?\\s*(\\d{2,4})/, \"$1 $2, $3\");\n  }\n\n  if (dataSpl[0].toLowerCase().indexOf(\"belk bucks\") !== -1){\n    dataSpl[1] = dataSpl[1].slice(dataSpl[1].toLowerCase().indexOf(\"belk bucks:\"));\n    return dataSpl[1].match(/from\\s*(?:January|February|March|April|May|June|July|August|September|October|November|December)\\s*\\d{1,2}\\s*-\\s*((?:January|February|March|April|May|June|July|August|September|October|November|December)\\s*(?:\\d{1,2}),?\\s*(?:\\d{2,4}))/)[0].replace(/from\\s*(?:January|February|March|April|May|June|July|August|September|October|November|December)\\s*\\d{1,2}\\s*-\\s*((?:January|February|March|April|May|June|July|August|September|October|November|December)\\s*(?:\\d{1,2}),?\\s*(?:\\d{2,4}))/, \"$1\");\n  }\n\n  return \"\";\n}",
            "dataTypes": [
              "DateTime"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_raw_validThrough": "concat(./@alt, ., \"~~~\", /descendant::text()[contains(.,\"belkemail.com\")]/ancestor::table)",
          "_footer": "/descendant::text()[contains(.,\"belkemail.com\")]/ancestor::table"
        },
        "hintsJavascript": "function transform(data) {\n  var n=data.get(\"_footer\");\n  n = n.toString().replace(/[A-z0-9.%+-_]{2,64}\\@[A-z0-9.]{2,64}/g,'');\n  return {'_footer': [n]};\n}"
      },
      {
        "id": "e9782ab0-b61a-441f-8248-0df0e5de869c",
        "repeating": true,
        "locations": [
          "/descendant::img[contains(translate(@alt,\"OF\",\"of\"),\" off\") and \n(contains(@alt,\"%\") or contains(@alt,\"$\")) or\ncontains(translate(@alt,\"FRE\",\"fre\"),\"free\")][not(contains(translate(@alt,\"INSTOREPCKU\",\"instorepcku\"),\"in-store pickup\"))]\n|\n/descendant::text()[contains(translate(.,\"FRESHIPNG\",\"freshipng\"),\"free shipping\") or contains(translate(.,\"FRELANCOMGIFT\",\"frelancomgift\"),\"free lancome gift\")]/ancestor::p"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": null,
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"belk\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      },
      {
        "id": "eab9ca70-3e38-4f66-b8cc-81d7a4810c4a",
        "repeating": true,
        "locations": [
          "/descendant::img"
        ],
        "type": "http://schema.org/ImageObject",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@src"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@alt | ./@title"
                }
              ]
            },
            "name": "http://schema.org/_imgtext",
            "relative": true,
            "transient": true,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "96b510fd-70f9-4e68-868e-92d82710889c",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "e9782ab0-b61a-441f-8248-0df0e5de869c",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      },
      {
        "from": {
          "entityRule": "96b510fd-70f9-4e68-868e-92d82710889c",
          "matchAttr": "http://schema.org/description"
        },
        "to": {
          "entityRule": "eab9ca70-3e38-4f66-b8cc-81d7a4810c4a",
          "matchAttr": "http://schema.org/_imgtext"
        },
        "predicate": "http://schema.org/image",
        "cardinality": "ONE_TO_ONE",
        "matchThreshold": "0.3"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

/* BON-TON shopbonton.com */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "b8363bc8-c57d-4a09-bd23-b27762d39c26",
        "repeating": true,
        "locations": [
          "//img[contains(translate(@alt,\"FRE\",\"fre\"),\"free\")  or \n\ncontains(translate(@alt,\"SALE\",\"sale\"),\"sale\") or \n\n(contains(@alt, \"%\") or contains(@alt, \"$\")) and \n(contains(translate(@alt,\"OFF\",\"of\"),\" off\") or\ncontains(translate(@alt,\"SAVE\",\"save\"),\"save\") or contains(translate(@alt,\"WIN\",\"win\"),\"win\")) or\n\ncontains(translate(@alt,\"COUPN\",\"coupn\"),\"coupon\") or \ncontains(translate(@alt,\"DORBUSTE\",\"dorbuste\"),\"door busters\") or\n(contains(@src,\"shipping\") or contains(@src, \"freeship\"))\n]\n"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@alt | ./@title | ./@src"
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  if(/http:\\/\\/.*ship.*\\.(jpg|gif)/.test(data)) return \"Free standard shipping\";\n  \n  var replaceArr = [\n    {oldStr: /\\*/ig, newStr: \"\"},\n    {oldStr: /(While supplies last|Print coupon|Shop now|Register now|Check it out|Learn more|Enter now).*/i, newStr: \"\"},\n    {oldStr: /^Plus, /i, newStr: \"\"}\n  ];\n     \n  replaceArr.forEach(function(el){\n    data = data.replace(el.oldStr, el.newStr);\n  });\n  \n  return data || \"\";\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "concat(./@alt,\"~~~\",//text()[contains(translate(.,\"PRIVACYOLI\",\"privacyoli\"),\"privacy policy\") or contains(translate(.,\"UNSUBCRIE\",\"unsubcrie\"),\"unsubscribe\")]/ancestor::table)"
                }
              ]
            },
            "name": "http://schema.org/validThrough",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  var dataSplit = data.split(\"~~~\");\n  var dateStr = \"\";\n  var matchDatesArr = [\n    {oldStr: /(?:valid|today,?|through(?: 1AM ES?T)?)\\s*(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday),?\\s*((?:January|February|March|April|May|June|July|August|September|October|November|December)\\s*\\d{1,2})/i, newStr: \"$1\"},\n    {oldStr: /Ends today.*((?:January|February|March|April|May|June|July|August|September|October|November|December) \\d{1,2})/i, newStr: \"$1\"}\n  ];\n  \n  \n  //When the coupon is created from a url source (see description - free standard shipping)\n  if(dataSplit[0].length === 0) return dataSplit[1].match(/(?:valid|today,?|through(?: 1AM ES?T)?)\\s*(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday),?\\s*((?:January|February|March|April|May|June|July|August|September|October|November|December)\\s*\\d{1,2})/)[0].replace(/(?:valid|today,?|through(?: 1AM ES?T)?)\\s*(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday),?\\s*((?:January|February|March|April|May|June|July|August|September|October|November|December)\\s*\\d{1,2})/, \"$1\");\n\n  \n  \n  //When there is a VT date in the description of the coupon\n  for(var j = 0; j < matchDatesArr.length; j++){\n    if(matchDatesArr[j].oldStr.test(dataSplit[0])) return dataSplit[0].match(matchDatesArr[j].oldStr)[0].replace(matchDatesArr[j].oldStr, matchDatesArr[j].newStr);\n  }\n\n\n\n  //If the footer has ***\n  if(dataSplit[0].indexOf(\"***\") !== -1){\n    dataStr = dataSplit[1].match(/\\*\\*\\*.*/)[0];\n    return matchDates(dateStr, matchDatesArr);\n  }\n\n\n  //If the footer has **\n  if(dataSplit[0].indexOf(\"**\") !== -1){\n    dateStr = dataSplit[1].match(/\\*\\*.*/)[0];\n    return matchDates(dateStr, matchDatesArr);\n  }\n\n\n  //If the footer has *\n  if(dataSplit[0].indexOf(\"*\") !== -1){\n    dateStr = dataSplit[1].match(/\\*.*/)[0];\n    return matchDates(dateStr, matchDatesArr);\n  }\n\n\n\n  return \"The first function\";\n}\n\n\n\nfunction matchDates(returnDate, datesArr){\n  for(var i = 0; i < datesArr.length; i++){\n    if(datesArr[i].oldStr.test(returnDate))\n    return returnDate.match(datesArr[i].oldStr)[0].replace(datesArr[i].oldStr, datesArr[i].newStr);\n  }\n\n  return \"Did not make it\";\n}",
            "dataTypes": [
              "DateTime"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./parent::a/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_footer": "//text()[contains(translate(.,\"BONT\",\"bont\"),\"bon-ton\")]/ancestor::table"
        }
      },
      {
        "id": "d40ff439-b71d-4e0d-8419-2bb981712afc",
        "repeating": true,
        "locations": [
          "//img[contains(translate(@alt,\"FRE\",\"fre\"),\"free\")  or \n\ncontains(translate(@alt,\"SALE\",\"sale\"),\"sale\") or \n\n(contains(@alt, \"%\") or contains(@alt, \"$\")) and \n(contains(translate(@alt,\"OFF\",\"of\"),\" off\") or\ncontains(translate(@alt,\"SAVE\",\"save\"),\"save\") or contains(translate(@alt,\"WIN\",\"win\"),\"win\")) or\n\ncontains(translate(@alt,\"COUPN\",\"coupn\"),\"coupon\") or \ncontains(translate(@alt,\"DORBUSTE\",\"dorbuste\"),\"door busters\") or\n(contains(@src,\"shipping\") or contains(@src, \"freeship\"))\n]\n"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": null,
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"BON-TON\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      },
      {
        "id": "5715844c-58dd-4104-8fda-fdea4635c8c3",
        "repeating": true,
        "locations": [
          "//img[contains(translate(@alt,\"FRE\",\"fre\"),\"free\")  or \n\ncontains(translate(@alt,\"SALE\",\"sale\"),\"sale\") or \n\n(contains(@alt, \"%\") or contains(@alt, \"$\")) and \n(contains(translate(@alt,\"OFF\",\"of\"),\" off\") or\ncontains(translate(@alt,\"SAVE\",\"save\"),\"save\") or contains(translate(@alt,\"WIN\",\"win\"),\"win\")) or\n\ncontains(translate(@alt,\"COUPN\",\"coupn\"),\"coupon\") or \ncontains(translate(@alt,\"DORBUSTE\",\"dorbuste\"),\"door busters\") or\n(contains(@src,\"shipping\") or contains(@src, \"freeship\"))\n]\n"
        ],
        "type": "http://schema.org/ImageObject",
        "javascript": null,
        "entityIdRef": null,
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@src"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "b8363bc8-c57d-4a09-bd23-b27762d39c26",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "d40ff439-b71d-4e0d-8419-2bb981712afc",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      },
      {
        "from": {
          "entityRule": "b8363bc8-c57d-4a09-bd23-b27762d39c26",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "5715844c-58dd-4104-8fda-fdea4635c8c3",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/image",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

/* BUYBUY BABY emailbuybuybaby.com */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "ed8ebf00-f645-410c-b5e3-31ed6adbb72d",
        "repeating": true,
        "locations": [
          "/descendant::a[contains(translate(.,\"FRESHIPNG\",\"freshipng\"),\"free shipping\") or \ncontains(.,\"%\")]/ancestor::table[1]\n|\n/descendant::img[contains(@alt,\"%\") or contains(@alt,\"$\") or\ncontains(translate(@alt,\"CLEARN\",\"clearn\"),\"clearance\")]"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@alt | ."
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data) {\n\tif(!data) return \"\";\n\tvar regArr = [\n      {oldStr:/[\\*©®ǂ†→]/g, newStr: \"\"},\n      {oldStr:/(Shop now|View details)\\..*/gi, newStr: \"\"},\n\t];\n\n\tregArr.forEach(function(el){\n      data = data.replace(el.oldStr, el.newStr).trim()\n    });\n\n\treturn data;\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./descendant::a/@href | ./parent::a/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./following::td[1][contains(translate(.,\"EXPIRS\",\"expirs\"),\"expires\")]"
                }
              ]
            },
            "name": "http://schema.org/validThrough",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  return data.match(/(\\d{1,2}\\/){2}\\d{2,4}/)[0];\n}",
            "dataTypes": [
              "DateTime"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_footer": "/descendant::text()[contains(translate(.,\"BUYAINC\",\"buyainc\"),\"buybuy baby inc\")]/ancestor::table[1]",
          "_raw_validThrough": "./following::td[1][contains(translate(.,\"EXPIRS\",\"expirs\"),\"expires\")]"
        }
      },
      {
        "id": "4ea4479f-5639-4ccc-9ee9-5c170a8bf450",
        "repeating": true,
        "locations": [
          "/descendant::a[contains(translate(.,\"FRESHIPNG\",\"freshipng\"),\"free shipping\") or \ncontains(.,\"%\")]/ancestor::table[1]\n|\n/descendant::img[contains(@alt,\"%\") or contains(@alt,\"$\") or\ncontains(translate(@alt,\"CLEARN\",\"clearn\"),\"clearance\")]"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"buy buy BABY\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      },
      {
        "id": "a5827674-b272-40ed-9d91-b866d981c6e8",
        "repeating": true,
        "locations": [
          "/descendant::img"
        ],
        "type": "http://schema.org/ImageObject",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@src"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@title | ./@alt"
                }
              ]
            },
            "name": "http://schema.org/_imgtext",
            "relative": true,
            "transient": true,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "ed8ebf00-f645-410c-b5e3-31ed6adbb72d",
          "matchAttr": "http://schema.org/description"
        },
        "to": {
          "entityRule": "a5827674-b272-40ed-9d91-b866d981c6e8",
          "matchAttr": "http://schema.org/_imgtext"
        },
        "predicate": "http://schema.org/image",
        "cardinality": "ONE_TO_ONE",
        "matchThreshold": "0.7"
      },
      {
        "from": {
          "entityRule": "ed8ebf00-f645-410c-b5e3-31ed6adbb72d",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "4ea4479f-5639-4ccc-9ee9-5c170a8bf450",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

/* CHILDRENS PLACE email.childrensplace.com */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "14569206-5c35-4881-8dc6-5b8d7e70bda4",
        "repeating": true,
        "locations": [
          "/descendant::img[contains(@alt,\"%\") or contains(@alt,\"$ Off\") or contains(@alt,\"Free\") or contains(@alt,\"Double Rewards\") or contains(@alt,\"Doorbuster\")][not (contains(@alt,\"& Up\") or contains(@alt,\"and Up\") or contains(@alt,\"Every Day\"))]\n|\n/descendant::a[contains(text(),\"%\")]\n"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@alt | ."
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  return data.replace(/-\\sLocate a Store!/, \"\").trim() || \"\";\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "//td/descendant::text()[contains(.,\"My Place Rewards\")]"
                }
              ]
            },
            "name": "http://schema.org/validThrough",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data) {\n\tif(!data) return \"\";\n\tvar months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n\t\n\t//Iterate through the months. If the month is included in \"data\" then:\n\t//1. slice the string where the month is at\n\t//2. return the match() of the string as month + days + year\n\tfor (var i = 0; i < months.length; i++) {\n\t\tif (data.indexOf(months[i]) !== -1) return data.slice(data.indexOf(months[i])).match(/[a-z\\s]+\\d{1,2}\\s-\\s\\d{1,2},\\s\\d{4}/i)[0].replace(/\\s\\d{1,2}\\s-/, \"\");\n\t}\n}",
            "dataTypes": [
              "DateTime"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_footer": "//a[contains(.,\"childrensplace.com\")]/parent::td/parent::tr/parent::tbody/parent::table",
          "_raw_validThrough": "//td/descendant::text()[contains(.,\"My Place Rewards\")]"
        },
        "hintsJavascript": "function transform(data) {\n\tvar n=data.get(\"_footer\");\n\tn=n.toString();\n\tn= n.replace(/[A-z0-9.%+-_]{2,64}\\@[A-z0-9.]{2,64}/g,'');\n\treturn {'_footer': [n]};\n}"
      },
      {
        "id": "f8c5cf95-4779-4200-a96f-9d0693caa9c8",
        "repeating": true,
        "locations": [
          "/descendant::img[contains(@alt,\"%\") or contains(@alt,\"$ Off\") or contains(@alt,\"Free\") or contains(@alt,\"Double Rewards\") or contains(@alt,\"Doorbuster\")][not (contains(@alt,\"& Up\") or contains(@alt,\"and Up\") or contains(@alt,\"Every Day\"))]\n|\n/descendant::a[contains(text(),\"%\")]\n"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"THE CHILDREN'S PLACE\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      },
      {
        "id": "c5de83aa-3b66-49ce-9d11-8875604ed440",
        "repeating": true,
        "locations": [
          "/descendant::img[contains(@alt,\"%\") or contains(@alt,\"$\") or contains(@alt,\"Free\") or contains(@alt,\"Double Rewards\")][not (contains(@alt,\"& Up\") or contains(@alt,\"and Up\"))]"
        ],
        "type": "http://schema.org/ImageObject",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@src"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@alt | ./@title"
                }
              ]
            },
            "name": "http://schema.org/_imgtext",
            "relative": true,
            "transient": true,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "14569206-5c35-4881-8dc6-5b8d7e70bda4",
          "matchAttr": "http://schema.org/description"
        },
        "to": {
          "entityRule": "c5de83aa-3b66-49ce-9d11-8875604ed440",
          "matchAttr": "http://schema.org/_imgtext"
        },
        "predicate": "http://schema.org/image",
        "cardinality": "ONE_TO_ONE",
        "matchThreshold": "0.7"
      },
      {
        "from": {
          "entityRule": "14569206-5c35-4881-8dc6-5b8d7e70bda4",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "f8c5cf95-4779-4200-a96f-9d0693caa9c8",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

/* CURRYS e.currys.co.uk */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "7b8e5864-8d73-42da-8292-40dfdc4a9847",
        "repeating": true,
        "locations": [
          "/descendant::img[contains(translate(@alt, \"SALE\", \"sale\"),\"sale\") or\ncontains(translate(@alt, \"FRE\", \"fre\"),\"free\") or\ncontains(translate(@alt, \"SAVE\", \"save\"),\"save\")]\n|\n/descendant::text()[contains(translate(.,\"ONLY\",\"only\"),\"only £\") or \ncontains(translate(.,\"SAVE\",\"save\"),\"save\") or\ncontains(translate(.,\"DELIVRY\",\"delivry\"),\"delivery\") and contains(.,\"Free\")]/ancestor::table[1]\n"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "normalize-space(./@alt)"
                },
                {
                  "xpath": "normalize-space(.)"
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data) {\n  var replaceArr = [\n    {oldStr: /[\\*©®ǂ†→§¹]/g, newStr: \"\"},\n    {oldStr: /buy\\s*(or\\s*reserve|now).*/i, newStr: \"\"},\n    {oldStr: /view\\s*range.*/i, newStr: \"\"},\n    {oldStr:/(Only £\\d+)(Was £\\d+)/, newStr: \" $1 $2\"}\n  ];\n  \n  for(var i = 0; i < replaceArr.length; i++){\n    data = data.replace(replaceArr[i].oldStr, replaceArr[i].newStr);\n  }\n\n  return data.trim();\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "/descendant::a[contains(translate(.,\"HURYENDS\",\"huryends\"),\"hurry, ends\")]"
                }
              ]
            },
            "name": "http://schema.org/validThrough",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data,node,headers){\n  var todayToDay = /Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday/i\n  if(todayToDay.exec(data)) {\n    var daysOfWeek = [\"sunday\", \"monday\", \"tuesday\", \"wednesday\", \"thursday\", \"friday\", \"saturday\"];\n    var emailDate = new Date(headers.Date * 1000);\n    var emailDay = emailDate.getDay();\n    var expirDay = daysOfWeek.indexOf(todayToDay.exec(data)[0].toLowerCase());\n    var addedDays = expirDay > emailDay ? expirDay - emailDay : expirDay < emailDay ? expirDay + 7 - emailDay : 0;\n\n    var finalDay = emailDate.getDate() + addedDays;\n    var month = emailDate.getMonth();\n\n    return new Date(\"1970\", month, finalDay);\n  }\n  return \"\";\n}",
            "dataTypes": [
              "DateTime"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./parent::a/@href | ./descendant::a/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_raw_validThrough": "concat(., ./parent::td/parent::tr/following::tr[contains(.,\"+\") and contains(.,\"¹\")],  /descendant::a[contains(.,\"customer.services@currys.co.uk\")]/parent::td)",
          "_footer": "/descendant::a[contains(.,\"customer.services@currys.co.uk\")]/parent::td/parent::tr/parent::tbody"
        }
      },
      {
        "id": "4ebdc7cf-7c5d-4ece-bb24-16bfabca8a31",
        "repeating": true,
        "locations": [
          "/descendant::img[contains(translate(@alt, \"SALE\", \"sale\"),\"sale\") or\ncontains(translate(@alt, \"FRE\", \"fre\"),\"free\") or\ncontains(translate(@alt, \"SAVE\", \"save\"),\"save\")]\n|\n/descendant::text()[contains(translate(.,\"ONLY\",\"only\"),\"only £\") or \ncontains(translate(.,\"SAVE\",\"save\"),\"save\") or\ncontains(translate(.,\"DELIVRY\",\"delivry\"),\"delivery\") and contains(.,\"Free\")]/ancestor::table[1]\n"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"Currys\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      },
      {
        "id": "00ae8a86-c332-4d4e-9df9-11efef39a0c4",
        "repeating": true,
        "locations": [
          "/descendant::img"
        ],
        "type": "http://schema.org/ImageObject",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@src"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@alt | ./@title"
                }
              ]
            },
            "name": "http://schema.org/_imgtext",
            "relative": true,
            "transient": true,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "7b8e5864-8d73-42da-8292-40dfdc4a9847",
          "matchAttr": "http://schema.org/description"
        },
        "to": {
          "entityRule": "00ae8a86-c332-4d4e-9df9-11efef39a0c4",
          "matchAttr": "http://schema.org/_imgtext"
        },
        "predicate": "http://schema.org/image",
        "cardinality": "ONE_TO_ONE",
        "matchThreshold": "0.3"
      },
      {
        "from": {
          "entityRule": "7b8e5864-8d73-42da-8292-40dfdc4a9847",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "4ebdc7cf-7c5d-4ece-bb24-16bfabca8a31",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

/* COSTCO  services.costco.com  */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "3b17af65-64e7-411f-8e6b-7929e02e76a1",
        "repeating": true,
        "locations": [
          "/descendant::a[contains(text(),\"%\")]\n|\n/descendant::p[contains(text(),\"%\") and not (contains(text(),\"tax\"))]"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "."
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data) {\n\tif (!data) return \"\";\n\t\n\tif (data.match(/\\*\\^/g)) data = data.replace(/\\*\\^/g, \"\");\n\n\tif (data[data.length-1].match(/\\d/) && data[data.length-2].match(/[a-z\\.]/i)) \n\treturn data.slice(0, data.length-1).match(/[\\d]{1,2}%[a-z\\s,\\.&]+/i)[0].trim();\n\t\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@href\n|\n./following::a/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_footer": "/descendant::tr[contains(.,\"%\")]"
        }
      },
      {
        "id": "a016f7cf-777e-4e20-aa42-adb63c15e3cd",
        "repeating": true,
        "locations": [
          "/descendant::a[contains(text(),\"%\")]\n|\n/descendant::p[contains(text(),\"%\") and not (contains(text(),\"tax\"))]"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"COSTCO WHOLESALE\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "3b17af65-64e7-411f-8e6b-7929e02e76a1",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "a016f7cf-777e-4e20-aa42-adb63c15e3cd",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

/* DICK'S SPORTING GOODS e.dcsg.com */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "51c3909e-c2b1-4909-8550-568550edec26",
        "repeating": true,
        "locations": [
          "/descendant::img[contains(translate(@alt,\"OF\",\"of\"),\" off\")]\n|\n/descendant::text()[contains(translate(.,\"OF\",\"of\"),\" off\") and (contains(.,\"%\") or contains(.,\"$\"))]\n/ancestor::table[2]\n|\n/descendant::text()[contains(translate(.,\"FRESHIPNG\",\"freshipng\"),\"free shipping\") or\ncontains(translate(.,\"WEKLDEAS\",\"wekldeas\"),\"weekly deals\") or \ncontains(translate(.,\"CLEARNC\",\"clearnc\"),\"clearance\")  and contains(translate(ancestor::td[1],\"DEALS\",\"deals\"),\"deals\") or\ncontains(translate(.,\"POINTS\",\"points\"),\"points\") and contains(translate(.,\"EARN\",\"earn\"),\"earn\")]\n\n/ancestor::table[1]\n[not(contains(.,\"you have\") or contains(translate(.,\"MOBILEAP\",\"mobileap\"),\"mobile app\") or contains(translate(.,\"RETAILERD\",\"retaild\"),\"retailer’s ad\") or\ncontains(translate(.,\"UNITEDSA\",\"unitedsa\"),\"united states\"))]"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@alt | ."
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  var replaceArr = [\n    {oldStr:/[\\*©®ǂ‡†±→§™¹›>]/g, newStr: \"\"},\n    {oldStr: /(Exclusions\\s*apply|Shop\\s*now).*/i, newStr: \"\"},\n    {oldStr: /\\|\\s*$/i, newStr: \"\"}\n  ];\n  \n    \n  \n  replaceArr.forEach(function(el){\n     data = data.replace(el.oldStr, el.newStr);\n  });\n\n  \n  \n  return data.trim() || \"\";\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./descendant::a/@href | parent::a/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@alt | ."
                }
              ]
            },
            "name": "http://schema.org/validThrough",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  return data.match(/.*Valid\\s*through\\s*((?:\\d{1,2}\\/){2}\\d{2,4})\\s*11:59PM\\s*.*/) ? data.replace(/.*Valid\\s*through\\s*((?:\\d{1,2}\\/){2}\\d{2,4})\\s*11:59PM\\s*.*/,\"$1\") : \"\";\n}",
            "dataTypes": [
              "DateTime"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_raw_validThrough": "./@alt | .",
          "_footer": "/descendant::text()[contains(translate(., 'DICKSPORTNG', 'dicksportng'), \"dick's sporting goods\")]/ancestor::table[1]"
        }
      },
      {
        "id": "417b457a-2545-440e-83ed-5f3a8a60afa6",
        "repeating": true,
        "locations": [
          "/descendant::img[contains(translate(@alt,\"OF\",\"of\"),\" off\")]\n|\n/descendant::text()[contains(translate(.,\"OF\",\"of\"),\" off\") and (contains(.,\"%\") or contains(.,\"$\"))]\n/ancestor::table[2]\n|\n/descendant::text()[contains(translate(.,\"FRESHIPNG\",\"freshipng\"),\"free shipping\") or\ncontains(translate(.,\"WEKLDEAS\",\"wekldeas\"),\"weekly deals\") or \ncontains(translate(.,\"CLEARNC\",\"clearnc\"),\"clearance\")  and contains(translate(ancestor::td[1],\"DEALS\",\"deals\"),\"deals\") or\ncontains(translate(.,\"POINTS\",\"points\"),\"points\") and contains(translate(.,\"EARN\",\"earn\"),\"earn\")]\n\n/ancestor::table[1]\n[not(contains(.,\"you have\") or contains(translate(.,\"MOBILEAP\",\"mobileap\"),\"mobile app\") or contains(translate(.,\"RETAILERD\",\"retaild\"),\"retailer’s ad\") or\ncontains(translate(.,\"UNITEDSA\",\"unitedsa\"),\"united states\"))]"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": null,
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"DICK'S SPORTING GOODS\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      },
      {
        "id": "af7c4b1c-17ca-4bdf-b675-8f92b9258da4",
        "repeating": true,
        "locations": [
          "/descendant::img[contains(translate(@alt,\"OF\",\"of\"),\" off\")]\n|\n/descendant::img[ancestor::table[1]/descendant::text()[contains(translate(.,\"OF\",\"of\"),\" off\") and (contains(.,\"%\") or contains(.,\"$\")) or\ncontains(translate(.,\"FRESHIPNG\",\"freshipng\"),\"free shipping\") or\ncontains(translate(.,\"WEKLDEAS\",\"wekldeas\"),\"weekly deals\") or \ncontains(translate(.,\"CLEARNC\",\"clearnc\"),\"clearance\")  and contains(translate(ancestor::td[1],\"DEALS\",\"deals\"),\"deals\") or\ncontains(translate(.,\"POINTS\",\"points\"),\"points\") and contains(translate(.,\"EARN\",\"earn\"),\"earn\")\n]\n[not(contains(.,\"you have\") or contains(translate(.,\"MOBILEAP\",\"mobileap\"),\"mobile app\") or contains(translate(.,\"RETAILERD\",\"retaild\"),\"retailer’s ad\") or\ncontains(translate(.,\"UNITEDSA\",\"unitedsa\"),\"united states\"))]\n]"
        ],
        "type": "http://schema.org/ImageObject",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@src"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "51c3909e-c2b1-4909-8550-568550edec26",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "417b457a-2545-440e-83ed-5f3a8a60afa6",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      },
      {
        "from": {
          "entityRule": "51c3909e-c2b1-4909-8550-568550edec26",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "af7c4b1c-17ca-4bdf-b675-8f92b9258da4",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/image",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

/* DEAL NEWS dealnews.com */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "38457f14-9763-4c6b-b972-9d71a41d5e17",
        "repeating": true,
        "locations": [
          "/descendant::a[contains(.,\"MORE\")]"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./parent::td/parent::tr/preceding-sibling::tr/td[contains(.,\"free\") or contains(.,\"%\")]"
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  return data + \".\" || \"\";\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./parent::td/parent::tr/preceding-sibling::tr/descendant::td[contains(.,\"free\")]/parent::tr/following-sibling::tr/td/a/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_footer": "/descendant::td[contains(text(),\"registered\")]"
        }
      },
      {
        "id": "11fc649a-1a14-4a54-85b1-94b6e3b5660d",
        "repeating": true,
        "locations": [
          "\"deal news\""
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": "",
        "attributes": []
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "38457f14-9763-4c6b-b972-9d71a41d5e17",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "11fc649a-1a14-4a54-85b1-94b6e3b5660d",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

/* EBAY reply.ebay.com */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "4cc47cc4-b184-478f-aba1-1c833a34113a",
        "repeating": true,
        "locations": [
          "/descendant::div[contains(.,\"%\")]/parent::td/parent::tr/parent::tbody\n|\n/descendant::div[contains(.,\"%\")]/parent::a/parent::td/parent::tr/parent::tbody"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "."
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  \t//Remove special characters\n\tdata = data.replace(/[\\*©®ǂ†→]/g, \"\");\n  \t\n  \t//If second dollar sign, add old price as \"$50. Was $100\".\n\tif(data.indexOf(\"$\") !== data.lastIndexOf(\"$\")) data = data.slice(0, data.lastIndexOf(\"$\")) + \". Was \" + data.slice(data.lastIndexOf(\"$\"));\n  \n  \t//Add space between the three dots and the dollar sign\n  \tdata = data.replace(/\\.{3}\\$/, \"... $\");\n  \n  \tdata = data.replace(/(\\w+)\\$/, \"$1: $\");\n  \n\treturn data;\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./descendant::a/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_footer": "/descendant::div[contains(.,\"eBay Inc\")]/ancestor::footer"
        },
        "hintsJavascript": "function transform(data) {\n\tvar n=data.get(\"_footer\");\n\tn=n.toString();\n\tn= n.replace(/[A-z0-9.%+-_]{2,64}\\@[A-z0-9.]{2,64}/g,'');\n\treturn {'_footer': [n]};\n}"
      },
      {
        "id": "846227a0-a959-478f-bf23-27df7cb39937",
        "repeating": true,
        "locations": [
          "/descendant::img"
        ],
        "type": "http://schema.org/ImageObject",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@src"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@alt | ./@title"
                }
              ]
            },
            "name": "http://schema.org/_imgtext",
            "relative": true,
            "transient": true,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      },
      {
        "id": "d51f0499-9757-42a6-8fd5-5f192c44ae54",
        "repeating": true,
        "locations": [
          "/descendant::div[contains(.,\"%\")]/parent::td/parent::tr/parent::tbody\n|\n/descendant::div[contains(.,\"%\")]/parent::a/parent::td/parent::tr/parent::tbody"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"ebay.com\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "4cc47cc4-b184-478f-aba1-1c833a34113a",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "d51f0499-9757-42a6-8fd5-5f192c44ae54",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      },
      {
        "from": {
          "entityRule": "4cc47cc4-b184-478f-aba1-1c833a34113a",
          "matchAttr": "http://schema.org/description"
        },
        "to": {
          "entityRule": "846227a0-a959-478f-bf23-27df7cb39937",
          "matchAttr": "http://schema.org/_imgtext"
        },
        "predicate": "http://schema.org/image",
        "cardinality": "ONE_TO_ONE",
        "matchThreshold": "0.7"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}
/* reply1.ebay.com */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "4cc47cc4-b184-478f-aba1-1c833a34113a",
        "repeating": true,
        "locations": [
          "/descendant::div[contains(.,\"%\")]/parent::td/parent::tr/parent::tbody[not (contains(.,\"Promotion\"))]"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "concat(./descendant::a[contains(text(),\"%\")], \" \", ./descendant::a[contains(text(),\"Ends\")])"
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n\n  //Remove text\n  var removeStrings = [\n    /[\\*©®ǂ†→]/g,\n    /\\sEnds\\s\\d+.*/\n  ];\n\n  removeStrings.forEach(function(el) {\n    data = data.replace(el, \"\");\n  });\n  \t\n  \t\n  \t//If second dollar sign, add old price as \"$50. Was $100\".\n\tif(data.indexOf(\"$\") !== data.lastIndexOf(\"$\")) data = data.slice(0, data.lastIndexOf(\"$\")) + \". Was \" + data.slice(data.lastIndexOf(\"$\"));\n\n\n    //Modify texts\n    var replaceStrings = [\n      {oldStr: /\\.{3}\\$/, newStr: \"... $\"},\n      {oldStr: /(\\w+)\\$/, newStr: \"$1: $\"},\n    ];\n    \n    replaceStrings.forEach(function(el) {\n      data = data.replace(el.oldStr, el.newStr);\n    });\n  \n\treturn data.trim();\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./descendant::a[contains(text(),\"%\")]/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./descendant::a[contains(text(),\"Ends\")]"
                }
              ]
            },
            "name": "http://schema.org/validThrough",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data) {\n  if (!data) return \"\";\n  //---PHASE 1---\n  //Regular expression strings and array with all string scenarios\n  var regEx1 = new RegExp(\"valid\\\\sthrough:?\\\\s\"); //valid through(:)\n  var regEx2 = new RegExp(\"expires:?\\\\s\"); //expires(:)\n  var regEx3 = new RegExp(\"until:?\\\\s\"); //until(:)\n  var regEx4 = new RegExp(\"offer\\\\sends:?\\\\s\"); //offer ends(:)\n  var regEx5 = new RegExp(\"valid\\\\suntil:?\\\\s\"); //valid until(:)\n  var regEx6 = new RegExp(\"\\\\.\\\\sEnds:?\\\\s\"); //. Ends(:)\n  var regExArr = [regEx1, regEx2, regEx3, regEx4, regEx5, regEx6];\n\n  var dateRegEx = new RegExp(\"\\\\d{1,2}[\\\\/\\\\.]\\\\d{1,2}([\\\\/\\\\.]\\\\d{2,4})?\"); // (N)N/(N)N/(NNNN)\n  var flags = \"i\"; //Can be i, gi, g\n\n\n\n  //---PHASE 2---\n  //Create the new Array -> expirTextArr. Push all the regular expressions inside\n  var expirTextArr = [];\n  for (var i = 0; i < regExArr.length; i++) {\n    expirTextArr.push(new RegExp (regExArr[i].source + dateRegEx.source, flags));\n  }\n\n\n\n  //---PHASE 3---\n  //String where the extracted (N)N/(N)N/(NNNN) is added. Then the string is split to an array.\n  var finalStrArr = \"\";\n  //loop through all the regular expressions inside the expirTextArr to see if there is a match\n  //If there is a match, then add the (N)N/(N)N/(NNNN) in finalStrArr and split it.\n  for (var i = 0; i < expirTextArr.length; i++) {\n   var el = expirTextArr[i];\n\n   if (data.match(el)) {\n    finalStrArr= data.match(el)[0].replace(/[\\.A-Za-z]/g,\"\").trim().split(\"/\");\n     break;\n   }\n  }\n\n  if (finalStrArr.length === 0) return null;\n  if (!finalStrArr[2]) finalStrArr[2] = \"1970\"\n\n  //---PHASE 4---\n  //Return a concatenation (this can be expanded based on other information like currency data)\n  return new Date(finalStrArr[0] + \"/\" + finalStrArr[1] + \"/\" + finalStrArr[2]);\n}",
            "dataTypes": [
              "DateTime"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_footer": "/descendant::div[contains(.,\"eBay Inc\")]",
          "_raw_validThrough": "./descendant::a[contains(text(),\". Ends\")]"
        },
        "hintsJavascript": "function transform(data) {\n\tvar n=data.get(\"_footer\");\n\tn=n.toString();\n\tn= n.replace(/[A-z0-9.%+-_]{2,64}\\@[A-z0-9.]{2,64}/g,'');\n\treturn {'_footer': [n]};\n}"
      },
      {
        "id": "d51f0499-9757-42a6-8fd5-5f192c44ae54",
        "repeating": true,
        "locations": [
          "/descendant::div[contains(.,\"%\")]/parent::td/parent::tr/parent::tbody[not (contains(.,\"Promotion\"))]"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"ebay.com\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "4cc47cc4-b184-478f-aba1-1c833a34113a",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "d51f0499-9757-42a6-8fd5-5f192c44ae54",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

/* EXPRESS b.express.com */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "e78e2b2c-a03e-4ae9-a2f8-08c1134a5044",
        "repeating": true,
        "locations": [
          "//text()[contains(translate(.,\"OF\",\"of\"),\"% off\")]"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "."
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "//text()[contains(translate(.,\"VALID\",\"valid\"),\"valid\") and contains(translate(.,\"THROUG\",\"throug\"),\"through\")]/ancestor::table[1]"
                }
              ]
            },
            "name": "http://schema.org/validThrough",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  return data.match(/through (January|February|March|April|May|June|Jule|August|September|October|November|December) \\d{1,2},? \\d{2,4}/)[0].replace(/through /,\"\");\n}",
            "dataTypes": [
              "DateTime"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "//img[@alt = \"express\"]/parent::a/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_footer": "//text()[contains(translate(.,\"EXPRSLC\",\"exprslc\"),\"express, llc\")]/ancestor::table[1]"
        }
      },
      {
        "id": "5d7475a4-e074-49ee-9e0b-1ed2043a57e7",
        "repeating": true,
        "locations": [
          "//text()[contains(translate(.,\"OF\",\"of\"),\"% off\")]"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": null,
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"EXPRESS\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      },
      {
        "id": "866b53a5-7e78-4fca-8740-816c476c7faa",
        "repeating": true,
        "locations": [
          "//img[@alt = \"express\"]"
        ],
        "type": "http://schema.org/ImageObject",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@src"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "e78e2b2c-a03e-4ae9-a2f8-08c1134a5044",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "5d7475a4-e074-49ee-9e0b-1ed2043a57e7",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      },
      {
        "from": {
          "entityRule": "e78e2b2c-a03e-4ae9-a2f8-08c1134a5044",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "866b53a5-7e78-4fca-8740-816c476c7faa",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/image",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

/* FAVE myfave.com */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "2379f893-55b2-47eb-8ee8-682de962bbf9",
        "repeating": true,
        "locations": [
          "//text()[contains(translate(.,\"SAVE\",\"save\"),\"save\") and contains(.,\"%\")]/ancestor::table[2]"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "."
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  var replaceArr = [\n    {oldStr: /(\\w)S(\\$\\d+(?:\\.\\d{2})?)/, newStr: \"$1 Was: $2,\"},\n\t{oldStr: /S(\\$\\d+(?:\\.\\d{2})?)(Save \\d{1,2}%).*/, newStr: \"Sale price: $1. $2\"}\n  ];\n  \n  replaceArr.forEach(function(el){\n    data = data.replace(el.oldStr, el.newStr);\n  });\n  \n  return data;\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./descendant::a/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ]
      },
      {
        "id": "3ea899cb-c30b-4601-844a-1b9bd5657e80",
        "repeating": true,
        "locations": [
          "//text()[contains(translate(.,\"SAVE\",\"save\"),\"save\") and contains(.,\"%\")]/ancestor::table[2]"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": null,
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"Fave\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      },
      {
        "id": "faca2b71-f37e-4684-8f59-0b6af28e0e09",
        "repeating": true,
        "locations": [
          "./descendant::img"
        ],
        "type": "http://schema.org/ImageObject",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@src"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "2379f893-55b2-47eb-8ee8-682de962bbf9",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "3ea899cb-c30b-4601-844a-1b9bd5657e80",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      },
      {
        "from": {
          "entityRule": "2379f893-55b2-47eb-8ee8-682de962bbf9",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "faca2b71-f37e-4684-8f59-0b6af28e0e09",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/image",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

/* FITBIT e.fitbit.com */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "43da91bc-4dea-4d44-8819-5e20459f0c05",
        "repeating": true,
        "locations": [
          "//descendant::strong[contains(text(),\"off\") and contains(text(), \"$\")]"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "concat(., \" \", ./following-sibling::text())"
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  return data.replace(/^For\\s/, \"\") || \"\";\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false,
            "hints": {
              "_footer": "/descendant::a[contains(.,\"Fitbit, Inc\")]/parent::td"
            }
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./following::tr/descendant::a[contains(.,\"REGISTER\") and contains(.,\"NOW\")]/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "/descendant::span[contains(.,\"valid through\")]"
                }
              ]
            },
            "name": "http://schema.org/validThrough",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data) {\n\tif(!data) return \"\";\n\tvar months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n  \n  data = data.slice(data.indexOf(\"valid through\"));\n\n\tfor (var i = 0; i < months.length; i++) {\n\t\tif (data.indexOf(months[i]) !== -1) return data.slice(data.indexOf(months[i])).match(/[a-z\\s]+\\s\\d{1,2}\\s?(-\\s?\\d{1,2})?,?(\\s\\d{4})?/i)[0];\n\t}\n}",
            "dataTypes": [
              "DateTime"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_raw_validThrough": "/descendant::span[contains(.,\"valid through\")]",
          "_footer": "/descendant::a[contains(.,\"Fitbit, Inc\")]/parent::td"
        }
      },
      {
        "id": "37d43f71-77d1-49f3-823f-1203be755c16",
        "repeating": true,
        "locations": [
          "//descendant::strong[contains(text(),\"off\") and contains(text(), \"$\")]"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": null,
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"fitbit\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "43da91bc-4dea-4d44-8819-5e20459f0c05",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "37d43f71-77d1-49f3-823f-1203be755c16",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

/* GARAGE CLOTHING email.garageclothing.com */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "8acb2a26-c7b6-4e61-8bb0-dc8f43612c0d",
        "repeating": true,
        "locations": [
          "/descendant::text()[contains(translate(.,\"FRESTANDRHIPG\",\"frestandrhipg\"),\"free standard shipping\") or\ncontains(translate(.,\"OF\",\"of\"),\" off\") and (contains(.,\"%\") or contains(.,\"$\")) or\ncontains(translate(.,\"SALE\",\"sale\"),\"sale\") or\ncontains(translate(.,\"ONLINEY\",\"onliney\"),\"online only\")]\n/parent::b"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "."
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "/descendant::a[contains(translate(.,\"BROWSER\",\"browser\"),\"browser\")]/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./following::text()"
                }
              ]
            },
            "name": "http://schema.org/validThrough",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  if(/Starting\\s*(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday)?(?:,\\s*)?(?:January|February|March|April|May|June|July|August|September|October|November|December)\\s*\\d{1,2}(?:st|nd|rd|th),?\\s*at\\s*\\d{1,2}\\s*a\\.?m\\.?\\s*\\(ET\\)\\s*until\\s(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday),?\\s*((?:January|February|March|April|May|June|July|August|September|October|November|December)\\s*\\d{1,2})/.test(data)){\n     return data.match(/until\\s(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday),?\\s*((?:January|February|March|April|May|June|July|August|September|October|November|December)\\s*\\d{1,2})/)[0].replace(/until\\s(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday),?\\s*/,\"\");\n     }\n  \n  if(/between\\s*(?:January|February|March|April|May|June|July|August|September|October|November|December)\\s*\\d{1,2},?\\s*\\d{2,4},?\\s*and\\s*((?:January|February|March|April|May|June|July|August|September|October|November|December)\\s*\\d{1,2},?\\s*\\d{2,4})/.test(data)){\n    return data.match(/and\\s*((?:January|February|March|April|May|June|July|August|September|October|November|December)\\s*\\d{1,2},?\\s*\\d{2,4})/)[0].replace(/and\\s*((?:January|February|March|April|May|June|July|August|September|October|November|December)\\s*\\d{1,2},?\\s*\\d{2,4})/,\"$1\");\n  }\n\n\treturn \"\";\n}",
            "dataTypes": [
              "DateTime"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_raw_validThrough": "./following::text()",
          "_footer": "/descendant::text()[contains(translate(.,\"ALRIGHTSEVD\",\"alrightsevd\"),\"all rights reserved\")]/ancestor::table[1]"
        },
        "hintsJavascript": "function transform(data) {\n  var ftr = data.get(\"_footer\")[0].replace(/[A-z0-9.%+-_]{2,64}\\@[A-z0-9.]{2,64}/g,'');\n  var rvt = data.get(\"_raw_validThrough\")[0];\n\n  return {\n    '_footer': [ftr],\n    '_raw_validThrough': [rvt]\n  };\n}"
      },
      {
        "id": "7a9d1e93-5c6a-4a3c-9497-97b5b6d57c87",
        "repeating": true,
        "locations": [
          "/descendant::text()[contains(translate(.,\"FRESTANDRHIPG\",\"frestandrhipg\"),\"free standard shipping\") or\ncontains(translate(.,\"OF\",\"of\"),\" off\") and (contains(.,\"%\") or contains(.,\"$\")) or\ncontains(translate(.,\"SALE\",\"sale\"),\"sale\") or\ncontains(translate(.,\"ONLINEY\",\"onliney\"),\"online only\")]\n/parent::b"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": null,
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"GARAGE\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "8acb2a26-c7b6-4e61-8bb0-dc8f43612c0d",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "7a9d1e93-5c6a-4a3c-9497-97b5b6d57c87",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

/* GNC mail.gnc.com */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "86ff7be8-fdf2-4d6d-846b-0ec0eab16275",
        "repeating": true,
        "locations": [
          "/descendant::td[contains(text(),\"$\")]"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "."
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  return data.replace(/\\*/g, \"\") || \"\";\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "/descendant::a[contains(.,\"View Online\")]/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "/descendant::span[contains(text(),\"effective through\")]"
                }
              ]
            },
            "name": "http://schema.org/validThrough",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data) {\n\tif(!data) return \"\";\n\tvar months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n\n\t//Iterate through the months. If the month is included in \"data\" then:\n\t//1. slice the string where the month is at\n\t//2. return the match() of the string as month + days + year\n\tfor (var i = 0; i < months.length; i++) {\n\t\tif (data.indexOf(months[i]) !== -1) return data.slice(data.indexOf(months[i])).match(/[a-z\\s]+[\\d]{1,2},?\\s[\\d]{4}/i)[0];\n\t}\n}",
            "dataTypes": [
              "DateTime"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_raw_validThrough": "/descendant::span[contains(text(),\"effective through\")]",
          "_footer": "/descendant::span[contains(text(),\"effective through\")]"
        }
      },
      {
        "id": "483d6db5-691e-47a6-8115-9b8aab9cf6d0",
        "repeating": true,
        "locations": [
          "/descendant::td[contains(text(),\"$\")]"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": null,
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"GNC\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "86ff7be8-fdf2-4d6d-846b-0ec0eab16275",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "483d6db5-691e-47a6-8115-9b8aab9cf6d0",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

/* GOLDSTAR mg.goldstar.com (div class=event)*/
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "250b951a-cde8-445b-85be-bd079dfe4f30",
        "repeating": true,
        "locations": [
          "/descendant::div[contains(@class,\"event\")]\n[descendant::p[contains(@style,\"text-decoration: line-through\") and contains(text(),\"$\")] or\ndescendant::p[contains(text(),\"FREE\")]/ancestor::div[contains(@class,\"more\")]]"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "concat(./descendant::div[contains(@class,\"heading\")]/descendant::h3, \" - \",\n./descendant::div[contains(@class,\"heading\")]/descendant::p, \" \",\n./descendant::p[contains(@class,\"our\")], \". Was \",\n./descendant::p[contains(@class,\"full\")])"
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  var replaceStrings = [\n    {oldStr:/[\\*©®ǂ†→§™¹›]/g, newStr: \"\"},\n    {oldStr:/Was$/, newStr: \"\"},\n  ];\n\n  replaceStrings.forEach(function(el) {\n    data = data.replace(el.oldStr, el.newStr);\n  });\n\n  return data.trim() || \"\";\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./child::a/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "/descendant::td[contains(text(),\"Now through\")]"
                }
              ]
            },
            "name": "http://schema.org/validThrough",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data,node,headers){\n  if(/Now\\sthrough/.exec(data)) {\n    var daysOfWeek = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\n    var headersArr = [];\n    for (var key in headers){\n      headersArr.push(headers[key]);\n    }\n    var emailDate = new Date(headersArr[3] * 1000);\n    var emailDay = emailDate.getDay();\n    var expirDay = daysOfWeek.indexOf(/Now\\sthrough.*/.exec(data)[0].replace(/Now\\sthrough\\s/, \"\").replace(/\\./, \"\"));\n    var addedDays = expirDay > emailDay ? expirDay - emailDay : expirDay + 7 - emailDay;\n\n    var finalDay = emailDate.getDate() + addedDays;\n    var month = emailDate.getMonth();\n\n    return new Date(\"1970\", month, finalDay);\n  }\n  return \"\";\n}",
            "dataTypes": [
              "DateTime"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_footer": "/descendant::p[contains(text(),\"Goldstar Events\")]/parent::td/parent::tr/parent::tbody/parent::table/parent::td/parent::tr/parent::tbody/parent::table/parent::td/parent::tr/parent::tbody",
          "_raw_validThrough": "/descendant::td[contains(text(),\"Now through\")]"
        },
        "hintsJavascript": "function transform(data) {\n  var n=data.get(\"_footer\");\n  n = n.toString().replace(/[A-z0-9.%+-_]{2,64}\\@[A-z0-9.]{2,64}/g,'');\n  return {'_footer': [n]};\n}"
      },
      {
        "id": "03a1439b-8818-4550-8d08-4a7b91fd6740",
        "repeating": true,
        "locations": [
          "/descendant::div[contains(@class,\"event\")]\n[descendant::p[contains(@style,\"text-decoration: line-through\") and contains(text(),\"$\")] or\ndescendant::p[contains(text(),\"FREE\")]/ancestor::div[contains(@class,\"more\")]]"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": null,
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"goldstar\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      },
      {
        "id": "57c65384-7a46-4ff6-8d2c-57b234d0b6c4",
        "repeating": true,
        "locations": [
          "/descendant::img"
        ],
        "type": "http://schema.org/ImageObject",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@src"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@alt | ./@title"
                }
              ]
            },
            "name": "http://schema.org/_imgurl",
            "relative": true,
            "transient": true,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "250b951a-cde8-445b-85be-bd079dfe4f30",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "03a1439b-8818-4550-8d08-4a7b91fd6740",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      },
      {
        "from": {
          "entityRule": "250b951a-cde8-445b-85be-bd079dfe4f30",
          "matchAttr": "http://schema.org/description"
        },
        "to": {
          "entityRule": "57c65384-7a46-4ff6-8d2c-57b234d0b6c4",
          "matchAttr": "http://schema.org/_imgurl"
        },
        "predicate": "http://schema.org/image",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}
/* Second scenario (table class=nb) */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "250b951a-cde8-445b-85be-bd079dfe4f30",
        "repeating": true,
        "locations": [
          "/descendant::table[contains(@class,\"nb\")]/descendant::table[1][descendant::span[contains(@style,\"text-decoration: line-through\")]]\n|\n/descendant::a[contains(text(),\"Get Tickets\")]/ancestor::table[contains(@class,\"nb\")]"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "concat(./descendant::table[2]/descendant::td[1], \" - \",\n./descendant::table[2]/descendant::td[2], \" \",\n./descendant::table[3]/descendant::a/child::text(), \". Was \",\n./descendant::table[3]/descendant::a/child::span)"
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  var replaceStrings = [\n    {oldStr:/[\\*©®ǂ†→§™¹›]/g, newStr: \"\"},\n    {oldStr: /Get\\sTickets.*/, newStr: \"\"},\n    {oldStr: /(\\d+\\s+(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\\s+)(\\$\\d+)/, newStr: \"$3. Was\"},\n    {oldStr:/Was$/, newStr: \"\"},\n    {oldStr: /\\s\\./, newStr: \"\"},\n    {oldStr:/\\s{2,}Was/, newStr: \". Was\"},\n  ];\n\n  replaceStrings.forEach(function(el) {\n    data = data.replace(el.oldStr, el.newStr);\n  });\n\n  return data.trim() || \"\";\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./descendant::a/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_footer": "/descendant::p[contains(text(),\"Goldstar Events\")]/parent::td/parent::tr/parent::tbody/parent::table/parent::td/parent::tr/parent::tbody/parent::table/parent::td/parent::tr/parent::tbody"
        }
      },
      {
        "id": "03a1439b-8818-4550-8d08-4a7b91fd6740",
        "repeating": true,
        "locations": [
          "/descendant::table[contains(@class,\"nb\")]/descendant::table[1][descendant::span[contains(@style,\"text-decoration: line-through\")]]\n|\n/descendant::a[contains(text(),\"Get Tickets\")]/ancestor::table[contains(@class,\"nb\")]"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"goldstar\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      },
      {
        "id": "57c65384-7a46-4ff6-8d2c-57b234d0b6c4",
        "repeating": true,
        "locations": [
          "/descendant::img"
        ],
        "type": "http://schema.org/ImageObject",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@src"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@alt | ./@title"
                }
              ]
            },
            "name": "http://schema.org/_imgurl",
            "relative": true,
            "transient": true,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "250b951a-cde8-445b-85be-bd079dfe4f30",
          "matchAttr": "http://schema.org/description"
        },
        "to": {
          "entityRule": "57c65384-7a46-4ff6-8d2c-57b234d0b6c4",
          "matchAttr": "http://schema.org/_imgurl"
        },
        "predicate": "http://schema.org/image",
        "cardinality": "ONE_TO_ONE"
      },
      {
        "from": {
          "entityRule": "250b951a-cde8-445b-85be-bd079dfe4f30",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "03a1439b-8818-4550-8d08-4a7b91fd6740",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

/* HAYNEEDLE updates.hayneedle.com */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "35d29a63-a9ce-491f-8343-211142282b59",
        "repeating": true,
        "locations": [
          "/"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "__METADATA.Subject"
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  var evalArr = [\"% off\", \"sale\"];\n  \n  for(var i = 0; i < evalArr.length; i++){\n    if(data.toLowerCase().indexOf(evalArr[i]) !== -1) return data;\n  }\n  \n  return null;\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "/descendant::a[contains(translate(.,\"BROWSE\",\"browse\"),\"browser\")]/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "__METADATA.Subject"
                }
              ]
            },
            "name": "http://schema.org/validThrough",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data,node,headers){\n  var expirKeywords = [\n    /ends\\s*today/i,\n    /ends\\s*tonight/i\n  ];\n  \n  for(var i = 0; i < expirKeywords.length; i++){\n    if(expirKeywords[i].test(data)){\n      var n = headers.get(\"Date\");\n      var n1 = new Date(n * 1000);\n      var day1 = n1.getDate();\n      var mon1 = n1.getMonth();\n      var vt = new Date(\"1970\", mon1, day1);\n      return vt;\n    }\n  }\n  \n  return \"\";\n}",
            "dataTypes": [
              "DateTime"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_footer": "/descendant::text()[contains(.,\"Hayneedle Inc\")]/ancestor::table[1]",
          "_raw_validThrough": "__METADATA.Subject"
        }
      },
      {
        "id": "0f1e3685-3c0b-4ab9-93bf-62ab4ae5b8da",
        "repeating": true,
        "locations": [
          "/"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"hayneedle\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "35d29a63-a9ce-491f-8343-211142282b59",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "0f1e3685-3c0b-4ab9-93bf-62ab4ae5b8da",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

/* ICICI BANK custcomm.icicibank.com */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "e100939d-48a0-48dd-b503-f1c98924f181",
        "repeating": true,
        "locations": [
          "/descendant::strong[contains(.,\"Cashback\")]"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "."
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  if (data) {\n    var splitStr = data.split(\" \");\n\n    //Itterating through the array. if element text contains both numbers and letters\n    //but no space, then split and ad \" $\"\n    for (var i = 0; i < splitStr.length; i++) {\n      if (splitStr[i].match(/[a-z]+[\\d]+/i)) {\n        splitStr[i] = splitStr[i].match(/[a-z]+/i) + \" $\" + splitStr[i].match(/[\\d]+/);\n      }\n    }\n    return splitStr.join(\" \");\n  }\n  return \"\";\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "/descendant::strong/a/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_footer": "/descendant::font[contains(text(),\"Terms\")]"
        }
      },
      {
        "id": "b3ec3b53-e23d-47d0-82bb-5d5b23ac7c1a",
        "repeating": true,
        "locations": [
          "/descendant::strong"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": null,
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"ICICI Bank\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "e100939d-48a0-48dd-b503-f1c98924f181",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "b3ec3b53-e23d-47d0-82bb-5d5b23ac7c1a",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

/* H&M email.hm.com */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "b7695c3d-acae-406e-9529-a3ccf82c00e3",
        "repeating": true,
        "locations": [
          "/descendant::span[contains(text(),\"% OFF\")]"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "."
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  data = data.replace(/[\\*©®ǂ†→§™¹]/g, \"\");\n  if(data.lastIndexOf(\":\") === data.length-1) data = data.slice(0, data.length-1);\n\n  var stringArr = [\n    /%/,\n    /free/i,\n    /gratuits/i, //French: Free\n    /Kostenloser/i, //German: Free\n    /gratuita/i, //Spanish: Free\n    /gratis/i, //Italian, Dutch, Corsican: Free\n    /GRÁTIS/i, //Portuguese: Free\n    /ingyenes/i, //Hungarian: Free\n    /gratuită/i, //Romanian: Free\n    /Бесплатная/i, //Russian: Free\n    /Δωρεάν/i, //Greek: Free\n    /БЕЗПЛАТНА/i, //Bulgarian: Free\n    /zdarma/i, //Czech: Free\n    /ZADARMO/i, //Slovak: Free\n    /Bezpłatna/i, //Polish: Free\n    /ÜCRETSİZ/i, //Turkish: Free\n    /مجاناً/i, //Arabic: Free\n    /折优惠/i //Chinese: Discount (% off)\n  ];\n\n  for (var i = 0; i < stringArr.length; i++) {\n    if (data.match(stringArr[i])) return data;\n  }\n\n  return \"\";\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "/descendant::p[contains(@class,\"view-in-browser\")]/descendant::a/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./following-sibling::text()"
                }
              ]
            },
            "name": "http://schema.org/validThrough",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  var dateFormats = {\n    fromTo: /from (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)[a-z]{0,}\\s\\d{1,2}(st|nd|rd|th)?\\sto\\s((Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)[a-z]{0,}\\s\\d{1,2}(st|nd|rd|th)?,?\\s\\d{4})/, // from mon(th) (n)n(st|nd|rd|th) to mon(th) (n)n(st|nd|rd|th), yyyy\n    mmddyyyy: /([\\d]{1,2}\\/){2}\\d{2,4}/, //MM/DD/YYYY\n    yyyymmdd: /\\d{4}(\\.[\\d]{1,2}){2}/, //YYYY/MM/DD\n    yyyymmddChn: /\\d{4}年\\d{1,2}月\\d{1,2}/, //YYYY/MM/DD - Chinese\n    ddmmyyyy: /([\\d]{1,2}\\.){2}\\d{2,4}/ //DD.MM.YYYY\n  };\n\n\n  for(var key in dateFormats){\n    if (dateFormats[key].exec(data)) {\n\n      //fromto\n      if (key === \"fromTo\") return new Date(dateFormats[key].exec(data)[0].replace(dateFormats[key], \"$3\"));\n\n\n\n      //mmddyyyy\n      if (key === \"mmddyyyy\") return dateFormats[key].exec(data)[0];\n\n\n\n\n      //yyyymmdd - yyyymmddChn - ddmmyyyy\n      if(key === \"yyyymmdd\" || key === \"yyyymmddChn\" || key === \"ddmmyyyy\") {\n        data = dateFormats[key].exec(data)[0].replace(/[年月]/g,\".\").split(\".\");\n        return key === \"ddmmyyyy\" ? data[1] + \"/\" + data[0] + \"/\" + data[2] : data[1] + \"/\" + data[2] + \"/\" + data[0];\n      }\n\n\n    } //End of parent if statement\n  } //End of for loop\n\nreturn \"\";\n}",
            "dataTypes": [
              "DateTime"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_footer": "/descendant::td[@class = \"footer\"]",
          "_raw_validThrough": "concat(., \"\", /descendant::div[contains(@class,\"footerContainer\")])"
        }
      },
      {
        "id": "47f1e546-87ee-405f-8477-e9dc9a73d276",
        "repeating": true,
        "locations": [
          "/descendant::span[contains(text(),\"% OFF\")]"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"H&M\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ],
        "hints": {}
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "b7695c3d-acae-406e-9529-a3ccf82c00e3",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "47f1e546-87ee-405f-8477-e9dc9a73d276",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

/* HOTTOPIC rewards.hottopic.com */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "03121823-7e52-440c-92a2-23d14884ff87",
        "repeating": true,
        "locations": [
          "/descendant::td[contains(.,\"OFFER\")]/descendant::strong[contains(text(),\"OFFER\")]"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "."
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  var replaceStrings = [\n    {oldStr:/[\\*©®ǂ†→§™¹›]/g, newStr: \"\"},\n    {oldStr:/-$/g, newStr: \"\"},\n  ];\n\n  replaceStrings.forEach(function(el) {\n    data = data.replace(el.oldStr, el.newStr);\n  });\n\n  return data.trim() || \"\";\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./following-sibling::text()"
                }
              ]
            },
            "name": "http://schema.org/validThrough",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data,node,headers){\n  if(/\\d+\\s+days\\s+from/.exec(data)) {\n    var numOfDays = Number(/\\d+\\s+days\\s+from/.exec(data)[0].replace(/[^0-9]/g, \"\"));\n    var n = headers.get(\"Date\");\n    var n1 = new Date(n * 1000);\n    var day1 = n1.getDate() + numOfDays;\n    var mon1 = n1.getMonth();\n    var vt = new Date(\"1970\", mon1, day1);\n    return vt;\n  }\n  return \"\";\n}",
            "dataTypes": [
              "DateTime"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "/descendant::a[contains(text(),\"browser\")]/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_footer": "/descendant::text()[contains(.,\"City of Industry\")]/parent::td/parent::tr/parent::tbody"
        }
      },
      {
        "id": "2b0d252a-30ee-4b1d-8cf4-03254a6260d8",
        "repeating": true,
        "locations": [
          "/descendant::td[contains(.,\"OFFER\")]/descendant::strong[contains(text(),\"OFFER\")]"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": null,
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"Hot Topic\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "03121823-7e52-440c-92a2-23d14884ff87",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "2b0d252a-30ee-4b1d-8cf4-03254a6260d8",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

/* JCPENNEY e.jcpenney.com */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "82e001a3-6aa3-4e23-a0c5-b7f75953c111",
        "repeating": true,
        "locations": [
          "/descendant::img[contains(@alt,\"% off\") or contains(@alt,\"Free shipping\") or contains(@alt,\"Code:\")]\n|\n/descendant::a[contains(text(),\"% off\") or contains(text(),\"Free shipping\") or contains(text(),\"Code:\")]\n"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@alt | ."
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){  \n  var replaceArr = [\n    /[\\*©®ǂ†→§¹]/g,\n    /shop\\snow$/i,\n    /^or\\s/i,\n    /get\\sdetails$/i\n  ];\n  \n  replaceArr.forEach(function(el){\n    data = data.replace(el, \"\");\n  });\n  \n  return data.charAt(0).toUpperCase() + data.slice(1) || \"\";\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./parent::a/@href \n| \n./@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_footer": "/descendant::text()[contains(.,\"J.C. Penney, Inc\")]/parent::td"
        },
        "hintsJavascript": "function transform(data) {\n\tvar n=data.get(\"_footer\");\n\tn=n.toString();\n\tn= n.replace(/[A-z0-9.%+-_]{2,64}\\@[A-z0-9.]{2,64}/g,'');\n\treturn {'_footer': [n]};\n}"
      },
      {
        "id": "6a6c5333-9aad-49bf-8841-95fe8d312942",
        "repeating": true,
        "locations": [
          "/descendant::img[contains(@alt,\"% off\") or contains(@alt,\"Free shipping\") or contains(@alt,\"Code:\")]\n|\n/descendant::a[contains(text(),\"% off\") or contains(text(),\"Free shipping\") or contains(text(),\"Code:\")]\n"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"JCPenney\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      },
      {
        "id": "48eebc83-5842-45db-823a-b08d4de0ca7b",
        "repeating": true,
        "locations": [
          "/descendant::img[contains(@alt,\"% off\") or contains(@alt,\"Free shipping\") or contains(@alt,\"Code:\")]\n"
        ],
        "type": "http://schema.org/ImageObject",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@src"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@alt | ./@title"
                }
              ]
            },
            "name": "http://schema.org/_imgtext",
            "relative": true,
            "transient": true,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "82e001a3-6aa3-4e23-a0c5-b7f75953c111",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "6a6c5333-9aad-49bf-8841-95fe8d312942",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      },
      {
        "from": {
          "entityRule": "82e001a3-6aa3-4e23-a0c5-b7f75953c111",
          "matchAttr": "http://schema.org/description"
        },
        "to": {
          "entityRule": "48eebc83-5842-45db-823a-b08d4de0ca7b",
          "matchAttr": "http://schema.org/_imgtext"
        },
        "predicate": "http://schema.org/image",
        "cardinality": "ONE_TO_ONE",
        "matchThreshold": "0.7"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

/* KROGERMAIL e.krogermail.com */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "0506122c-f38c-4f39-8b88-a6c4bc753caf",
        "repeating": true,
        "locations": [
          "/descendant::text()[(contains(translate(.,\"OF\",\"of\"),\"off\") or contains(translate(.,\"SAVE\",\"save\"),\"save\")) and (contains(.,\"%\") or contains(.,\"$\")) or\ncontains(translate(.,\"POINTS\",\"points\"),\"points\")][not(contains(translate(.,\"PROHIBTED\",\"prohibted\"),\"prohibited\"))]\n/ancestor::table[3]"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "."
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  var replaceArr = [\n    {oldStr: /(download coupon|start shopping|see the deals|shop & ship).*/i, newStr: \"\"},\n    {oldStr: /\\.\\d\\s*$/, newStr: \"\"}\n  ];\n  \n  replaceArr.forEach(function(el){\n    data = data.replace(el.oldStr, el.newStr);\n  });\n  \n  return data;\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "/descendant::a/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "/descendant::text()[contains(translate(.,\"NOWTHRUG\",\"nowthrug\"),\"now through\")]"
                }
              ]
            },
            "name": "http://schema.org/validThrough",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data) {\n\treturn data.match(/(January|February|March|April|May|June|July|August|September|October|November|December)\\s*\\d{1,2}/)[0];\n}",
            "dataTypes": [
              "DateTime"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_raw_validThrough": "/descendant::text()[contains(translate(.,\"NOWTHRUG\",\"nowthrug\"),\"now through\")]",
          "_footer": "/descendant::text()[contains(translate(.,\"THEKROGRC\",\"thekrogrc\"),\"the kroger co.\")]/ancestor::table[1]"
        },
        "hintsJavascript": "function transform(data) {\n\tvar n=data.get(\"_footer\");\n\tn=n.toString();\n\tn= n.replace(/[A-z0-9.%+-_]{2,64}\\@[A-z0-9.]{2,64}/g,'');\n\treturn {'_footer': [n]};\n}"
      },
      {
        "id": "e79932a4-d008-48f3-ba97-bf66d2356f6a",
        "repeating": true,
        "locations": [
          "/descendant::text()[(contains(translate(.,\"OF\",\"of\"),\"off\") or contains(translate(.,\"SAVE\",\"save\"),\"save\")) and (contains(.,\"%\") or contains(.,\"$\")) or\ncontains(translate(.,\"POINTS\",\"points\"),\"points\")][not(contains(translate(.,\"PROHIBTED\",\"prohibted\"),\"prohibited\"))]\n/ancestor::table[3]"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"Kroger\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      },
      {
        "id": "f27bd670-ed94-4968-82a8-14d013b641b9",
        "repeating": true,
        "locations": [
          "./descendant::img"
        ],
        "type": "http://schema.org/ImageObject",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@src"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "0506122c-f38c-4f39-8b88-a6c4bc753caf",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "e79932a4-d008-48f3-ba97-bf66d2356f6a",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      },
      {
        "from": {
          "entityRule": "0506122c-f38c-4f39-8b88-a6c4bc753caf",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "f27bd670-ed94-4968-82a8-14d013b641b9",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/image",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

/* LANDS' END email.landsend.com*/
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "d0ebaf19-eb36-448f-92d0-2f1fe2b81936",
        "repeating": true,
        "locations": [
          "//text()[contains(translate(.,\"OF\",\"of\"),\"% off\")]/ancestor::table[1][following::table[1][contains(translate(.,\"SHOP\",\"shop\"),\"shop\")]]\n|\n//img[contains(translate(@alt,\"SALE\",\"sale\"),\"sale\")]\n"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@alt | ."
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data) {\n  var replaceArr = [\n    {oldStr: /\\*/, newStr: \"\"},\n    {oldStr: /\\+/, newStr: \"\"},\n    {oldStr: /\\|\\s*Shop\\s*now\\s*$/i, newStr: \"\"},\n    //{oldStr: //, newStr: \"\"},\n  ];\n  \n  replaceArr.forEach(function(el){\n    data = data.replace(el.oldStr, el.newStr);\n  });\n  \n return data;\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "concat(., ./@alt, \"~~~\", /descendant::text()[contains(translate(.,\"VALIDTHROUG\",\"validthroug\"),\"valid through\")])"
                }
              ]
            },
            "name": "http://schema.org/validThrough",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data) {\n  var dataSplit = data.split(\"~~~\");\n  if(dataSplit[0].indexOf(\"*\") !== -1)\n    return dataSplit[1].match(/(January|February|March|April|May|June|July|August|September|October|November|December)\\s*\\d{1,2},?\\s*\\d{2,4}/)[0];\n      \n  return \"\";\n}",
            "dataTypes": [
              "DateTime"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./following::table[1][contains(translate(.,\"SHOP\",\"shop\"),\"shop\")]/descendant::a/@href \n|\n./parent::a/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_footer": "/descendant::p[contains(.,\"landsend.com\")]/parent::div",
          "_raw_validThrough": "concat(., ./@alt, \"~~~\", /descendant::text()[contains(translate(.,\"VALIDTHROUG\",\"validthroug\"),\"valid through\")])"
        }
      },
      {
        "id": "51009acc-e604-4bb0-83c1-ba5ec5e44e33",
        "repeating": true,
        "locations": [
          "//text()[contains(translate(.,\"OF\",\"of\"),\"% off\")]/ancestor::table[1][following::table[1][contains(translate(.,\"SHOP\",\"shop\"),\"shop\")]]\n|\n//img[contains(translate(@alt,\"SALE\",\"sale\"),\"sale\")]\n"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"LANDS' END\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      },
      {
        "id": "ce39fb9e-d66d-4164-ace8-1f1c9551fdba",
        "repeating": true,
        "locations": [
          "//img\n"
        ],
        "type": "http://schema.org/ImageObject",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@src"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@alt | ./@title"
                }
              ]
            },
            "name": "http://schema.org/_imgtext",
            "relative": true,
            "transient": true,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "d0ebaf19-eb36-448f-92d0-2f1fe2b81936",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "51009acc-e604-4bb0-83c1-ba5ec5e44e33",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      },
      {
        "from": {
          "entityRule": "d0ebaf19-eb36-448f-92d0-2f1fe2b81936",
          "matchAttr": "http://schema.org/description"
        },
        "to": {
          "entityRule": "ce39fb9e-d66d-4164-ace8-1f1c9551fdba",
          "matchAttr": "http://schema.org/_imgtext"
        },
        "predicate": "http://schema.org/image",
        "cardinality": "ONE_TO_ONE",
        "matchThreshold": "0.3"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

LEVI'S e.levi.com
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "93970394-c64e-4f0a-807a-4b31b0c0f617",
        "repeating": true,
        "locations": [
          "//img[contains(translate(@alt,\"OF\",\"of\"),\"% off\")]"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@alt"
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./parent::a/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "//text()[contains(translate(.,\"OFERNDS\",\"ofernds\"),\"offer ends\")]"
                }
              ]
            },
            "name": "http://schema.org/validThrough",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  return data.match(/(\\d{1,2}\\/){2}\\d{2,4}/)[0];\n}",
            "dataTypes": [
              "DateTime"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_raw_validThrough": "//text()[contains(translate(.,\"OFERNDS\",\"ofernds\"),\"offer ends\")]",
          "_footer": "//text()[contains(translate(.,\"LEVISTRAU\",\"levistrau\"),\"levi strauss\")]/ancestor::table[1]"
        }
      },
      {
        "id": "7ae36339-93fe-46aa-ad59-5ba3620b4a26",
        "repeating": true,
        "locations": [
          "//img[contains(translate(@alt,\"OF\",\"of\"),\"% off\")]"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"LEVI'S\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      },
      {
        "id": "789503d7-bf97-48b9-b1b8-a1957905e01f",
        "repeating": true,
        "locations": [
          "//img[contains(translate(@alt,\"OF\",\"of\"),\"% off\")]"
        ],
        "type": "http://schema.org/ImageObject",
        "javascript": null,
        "entityIdRef": null,
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@src"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "93970394-c64e-4f0a-807a-4b31b0c0f617",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "7ae36339-93fe-46aa-ad59-5ba3620b4a26",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      },
      {
        "from": {
          "entityRule": "93970394-c64e-4f0a-807a-4b31b0c0f617",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "789503d7-bf97-48b9-b1b8-a1957905e01f",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/image",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

/* MACYS emails.macys.com */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "1a5ffb37-1c1f-4d26-82d1-7f1f2d5dfbc6",
        "repeating": true,
        "locations": [
          "/descendant::img[\ncontains(@alt,\"percent Off\") or contains(@alt,\"percent off\") or contains(@alt,\"Percent Off\") or contains(@alt,\"% off\") or contains(@alt,\"% Off\") or contains(@alt,\"% OFF\") or \ncontains(@alt,\"free\") or\ncontains(@alt,\"get $\")]\n[not (contains(@alt,\"Rewards\") or \ncontains(@alt,\"rewards\") or \ncontains(@alt,\"Credit Card\") or \ncontains(@alt,\"Gifts\"))]\n|\n/descendant::a[contains(.,\"%\")]\n"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@alt|."
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data) {\n  if(!data) return null;\n\n  var replaceStrings = [\n    {oldStr: /\\,\\sOut\\sof\\sStore.*/g, newStr: \"\"},\n    {oldStr: /\\,\\sFinancing.*/g, newStr: \"\"},\n    {oldStr: /\\,\\sExclusions.*/g, newStr: \"\"},\n    {oldStr: /Exclusions.*/g, newStr: \"\"},\n    {oldStr: /\\,\\s*Shop\\s*All\\s*\\w+/g, newStr: \"\"},\n    {oldStr: /\\,\\sJoin\\sNow/g, newStr: \"\"},\n    {oldStr: /\\,\\sShop\\sNow/g, newStr: \"\"},\n    {oldStr: /Terms.*/g, newStr: \"\"},\n    {oldStr: /^Plus,\\s/g, newStr: \"\"},\n    {oldStr: /\\spercent/g, newStr: \"%\"},\n    {oldStr: /(\\$)\\s(\\d)/, newStr: \"$1$2\"},\n    {oldStr: /([A-z])(&)/g, newStr: \"$1 $2\"},\n    {oldStr: /Offer\\sgood\\swhile\\ssupplies\\slast.*/, newStr:\"\"}\n  ];\n\n  replaceStrings.forEach(function(el) {\n    data = data.replace(el.oldStr, el.newStr);\n  })\n\n return data.trim();\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@href\n|\n./parent::a/@href\n|\n//a[contains(.,\"Open\")]/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@alt|."
                }
              ]
            },
            "name": "http://schema.org/validThrough",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data) {\n  var months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n  var months2 = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n  var days = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\n\n\n  // For the format \"Oct. 10\"\n\tfor (var i = 0; i < months.length; i++) {\n\t\tif (data.indexOf(months[i]+\".\") !== -1)\n    return data.slice(data.indexOf(months[i]), data.length-1).replace(/([A-Z][a-z]{2}\\.\\s\\d{1,2}).*/, \"$1\").replace(/\\./,\"\");\n\t}\n\n\n\n  // For the format \"October 10\"\n  for (var j = 0; j < months2.length; j++) {\n    if (data.indexOf(months2[j]) !== -1)\n    return data.slice(data.indexOf(months2[j]), data.length-1);\n  }\n\n\n\n  // For the format \"10.12, Friday\"\n  for (var k = 0; k < days.length; k++) {\n    if (data.match(/\\d{1,2}\\.\\d{1,2},\\s/.source + RegExp(days[k]).source))\n    return data.match(/\\d{1,2}\\.\\d{1,2}/)[0].replace(/\\./,\"/\") + \"/1970\";\n  }\n\n\n  //For Veterans Day Sale\n  if (data.match(/Veterans\\sDay/)) return \"11/11/1970\";\n\n  return \"\";\n}",
            "dataTypes": [
              "DateTime"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_footer": "/descendant::text()[contains(.,\"Macys.com\")]/parent::span/parent::td",
          "_raw_validThrough": "./@alt|."
        },
        "hintsJavascript": null
      },
      {
        "id": "3209e700-8e00-4d09-8d7b-b4a7ee5a1edd",
        "repeating": true,
        "locations": [
          "/descendant::img[\ncontains(@alt,\"percent Off\") or contains(@alt,\"percent off\") or contains(@alt,\"Percent Off\") or contains(@alt,\"% off\") or contains(@alt,\"% Off\") or contains(@alt,\"% OFF\") or \ncontains(@alt,\"free\") or\ncontains(@alt,\"get $\")]\n[not (contains(@alt,\"Rewards\") or \ncontains(@alt,\"rewards\") or \ncontains(@alt,\"Credit Card\") or \ncontains(@alt,\"Gifts\"))]\n|\n/descendant::a[contains(.,\"%\")]\n"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"Macy's\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      },
      {
        "id": "d512486e-f74a-4589-b3a2-6acce89b47fe",
        "repeating": true,
        "locations": [
          "/descendant::img"
        ],
        "type": "http://schema.org/ImageObject",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@src"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@alt | ./@title"
                }
              ]
            },
            "name": "http://schema.org/_imgtext",
            "relative": true,
            "transient": true,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "1a5ffb37-1c1f-4d26-82d1-7f1f2d5dfbc6",
          "matchAttr": "http://schema.org/description"
        },
        "to": {
          "entityRule": "d512486e-f74a-4589-b3a2-6acce89b47fe",
          "matchAttr": "http://schema.org/_imgtext"
        },
        "predicate": "http://schema.org/image",
        "cardinality": "ONE_TO_ONE",
        "matchThreshold": ".7"
      },
      {
        "from": {
          "entityRule": "1a5ffb37-1c1f-4d26-82d1-7f1f2d5dfbc6",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "3209e700-8e00-4d09-8d7b-b4a7ee5a1edd",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

/* MARY KAY email.marykay.com */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "85ea3f5c-60ea-4e41-8d33-f3073157181f",
        "repeating": true,
        "locations": [
          "/descendant::div[contains(.,\"FREE\")]"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "."
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data) {\n  data = data.replace(/[\\*©®ǂ†]/g, \"\");\n  return data.split(\"Hurry\")[0].trim() || \"\";\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "."
                }
              ]
            },
            "name": "http://schema.org/validThrough",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data) {\n  data = data.replace(/[\\*©®ǂ†]/g, \"\");\n  return data.split(\"Hurry offer ends \")[1].trim() || \"\";\n}",
            "dataTypes": [
              "DateTime"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "/descendant::a[contains(text(),\"SIGN UP NOW\")]/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_footer": "/descendant::text()[contains(.,\"MARY KAY INC\")]/ancestor::p/parent::td/parent::tr/parent::tbody"
        }
      }
    ],
    "edgeRules": [],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

/* MICHAELS emdeals.michaels.com  */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "c497c926-0231-4a60-bb9b-56fe6a97d247",
        "repeating": true,
        "locations": [
          "/descendant::img[contains(@alt,\"%\") or contains(translate(@alt,\"CUSTOM\",\"custom\"),\"custom\")][ancestor::tr[1]/following-sibling::tr[1]\n/descendant::a[1][contains(translate(.,\"VALID\",\"valid\"),\"valid\")]]"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@alt"
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./parent::a/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./following::a[1]"
                }
              ]
            },
            "name": "http://schema.org/validThrough",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  return data.match(/(\\d{1,2}\\/){2}\\d{2,4}/)[0];\n}",
            "dataTypes": [
              "DateTime"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_raw_validThrough": "./following::a[1]",
          "_footer": "/descendant::text()[contains(.,\"Michaels Stores\")]/ancestor::table[1]"
        }
      },
      {
        "id": "bbd9cd3c-f13a-45dd-84b1-c7483c48949f",
        "repeating": true,
        "locations": [
          "/descendant::img[contains(@alt,\"%\") or contains(translate(@alt,\"CUSTOM\",\"custom\"),\"custom\")][ancestor::tr[1]/following-sibling::tr[1]\n/descendant::a[1][contains(translate(.,\"VALID\",\"valid\"),\"valid\")]]"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"Michaels\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      },
      {
        "id": "ad40fe57-2b07-4f44-981d-958779c8facf",
        "repeating": true,
        "locations": [
          "/descendant::img[contains(@alt,\"%\") or contains(translate(@alt,\"CUSTOM\",\"custom\"),\"custom\")][ancestor::tr[1]/following-sibling::tr[1]\n/descendant::a[1][contains(translate(.,\"VALID\",\"valid\"),\"valid\")]]"
        ],
        "type": "http://schema.org/ImageObject",
        "javascript": null,
        "entityIdRef": null,
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@src"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "c497c926-0231-4a60-bb9b-56fe6a97d247",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "bbd9cd3c-f13a-45dd-84b1-c7483c48949f",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      },
      {
        "from": {
          "entityRule": "c497c926-0231-4a60-bb9b-56fe6a97d247",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "ad40fe57-2b07-4f44-981d-958779c8facf",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/image",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

/* NEXT nextemail.co.uk */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "76697cbf-4d4d-485b-8560-ec7cca530cc9",
        "repeating": true,
        "locations": [
          "/descendant::table[contains(@class,\"hide\")]/descendant::img[contains(@alt,\"*\")]"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@alt",
                  "regex": "[A-z\\s]+£\\d+.*\\*"
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data) {\n  data = data.replace(/[\\*©®ǂ†→§¹]/g, \"\");\n  return data || \"\";\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./parent::a/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_footer": "/descendant::text()[contains(.,\"Next Retail Ltd\")]/parent::td"
        }
      },
      {
        "id": "77db1f98-8771-4186-8e0e-44aaa3c18182",
        "repeating": true,
        "locations": [
          "/descendant::table[contains(@class,\"hide\")]/descendant::img"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": null,
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"next\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      },
      {
        "id": "03a9d9fd-70df-4b1a-a678-6e24ceea6159",
        "repeating": true,
        "locations": [
          "/descendant::table[contains(@class,\"hide\")]/descendant::img[contains(@alt,\"*\")]"
        ],
        "type": "http://schema.org/ImageObject",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@src"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "76697cbf-4d4d-485b-8560-ec7cca530cc9",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "77db1f98-8771-4186-8e0e-44aaa3c18182",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      },
      {
        "from": {
          "entityRule": "76697cbf-4d4d-485b-8560-ec7cca530cc9",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "03a9d9fd-70df-4b1a-a678-6e24ceea6159",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/image",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

/* OFFICE DEPOT e.officedepot.com */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "85290066-92b0-4fc9-91c8-939b6db4bd9d",
        "repeating": true,
        "locations": [
          "/descendant::tr[@class=\"mobile-hidden\"]/descendant::img[contains(@class,\"image\")][contains(@alt,\"%\") or contains(@alt,\"$\") or contains(@alt,\"Save\") or contains(@alt,\"Sale\") or contains(@alt,\"Free\")][not (contains(@alt,\"Tech Support\") or contains(@alt,\"starting at $\") or contains(@alt,\"Paper\")  or contains(@alt,\"paper\") or contains(@alt,\"Business Cards for $\") or contains(@alt,\"Now Businesses Save More\") or contains(@alt,\"Laptop Bundles starting at\"))] \n|\n/descendant::tr[@class=\"mobile-hidden\"]/descendant::img[not(@class)][contains(@alt,\"%\") or contains(@alt,\"$\") or contains(@alt,\"Save\") or contains(@alt,\"Sale\") or contains(@alt,\"Free\")][not (contains(@alt,\"Tech Support\") or contains(@alt,\"starting at $\") or contains(@alt,\"Paper\") or contains(@alt,\"paper\") or contains(@alt,\"Business Cards for $\") or contains(@alt,\"Now Businesses Save More\") or contains(@alt,\"Laptop Bundles starting at\"))]\n|\n/descendant::img[contains(@class,\"image\")]/parent::a/parent::td/parent::tr[not(@class)]/descendant::img[contains(@alt,\"%\") or contains(@alt,\"$\") or contains(@alt,\"Save\") or contains(@alt,\"Sale\") or contains(@alt,\"Free\")][not (contains(@alt,\"Tech Support\") or contains(@alt,\"\nstarting at $\") or contains(@alt,\"Paper $\") or contains(@alt,\"paper\") or contains(@alt,\"Business Cards for $\") or contains(@alt,\"Now Businesses Save More\") or contains(@alt,\"Laptop Bundles starting at\"))]\n|\n/descendant::span[contains(text(),\"delivery\")]\n|\n/descendant::a[contains(text(),\"$\") or contains(text(),\"%\") or contains(text(),\"Free\")]\n|\n/descendant::td[contains(text(),\"%\") and not (contains(.,\"Bonus Rewards\"))]\n|\n/descendant::b[contains(text(),\"$\")]\n"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@alt | ."
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  if(data.trim()[data.length-1] === \":\") return data.slice(0,data.length-1);\n  return data || \"\";\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "/descendant::text()[contains(.,\"through\") and contains(.,\"Prices and offers valid\")]"
                }
              ]
            },
            "name": "http://schema.org/validThrough",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data) {\n\treturn data.match(/through\\s(\\d{1,2}\\/){2}\\d{2,4}/) ? data.match(/through\\s(\\d{1,2}\\/){2}\\d{2,4}/)[0].replace(/through\\s/,\"\").trim() : \"\";\n}",
            "dataTypes": [
              "DateTime"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./parent::a/@href \n| \n/descendant::span[contains(text(),\"View in web browser\")]/parent::a/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_raw_validThrough": "/descendant::text()[contains(.,\"through\") and contains(.,\"Prices and offers valid\")]",
          "_footer": "/descendant::text()[contains(.,\"Office Depot\")]/parent::td/parent::tr/parent::tbody"
        },
        "hintsJavascript": null
      },
      {
        "id": "93554bc9-c9bd-41fa-9815-ef300e6aa5cc",
        "repeating": true,
        "locations": [
          "/descendant::tr[@class=\"mobile-hidden\"]/descendant::img[contains(@class,\"image\")][contains(@alt,\"%\") or contains(@alt,\"$\") or contains(@alt,\"Save\") or contains(@alt,\"Sale\") or contains(@alt,\"Free\")][not (contains(@alt,\"Tech Support\") or contains(@alt,\"starting at $\") or contains(@alt,\"Paper\")  or contains(@alt,\"paper\") or contains(@alt,\"Business Cards for $\") or contains(@alt,\"Now Businesses Save More\") or contains(@alt,\"Laptop Bundles starting at\"))] \n|\n/descendant::tr[@class=\"mobile-hidden\"]/descendant::img[not(@class)][contains(@alt,\"%\") or contains(@alt,\"$\") or contains(@alt,\"Save\") or contains(@alt,\"Sale\") or contains(@alt,\"Free\")][not (contains(@alt,\"Tech Support\") or contains(@alt,\"starting at $\") or contains(@alt,\"Paper\") or contains(@alt,\"paper\") or contains(@alt,\"Business Cards for $\") or contains(@alt,\"Now Businesses Save More\") or contains(@alt,\"Laptop Bundles starting at\"))]\n|\n/descendant::img[contains(@class,\"image\")]/parent::a/parent::td/parent::tr[not(@class)]/descendant::img[contains(@alt,\"%\") or contains(@alt,\"$\") or contains(@alt,\"Save\") or contains(@alt,\"Sale\") or contains(@alt,\"Free\")][not (contains(@alt,\"Tech Support\") or contains(@alt,\"\nstarting at $\") or contains(@alt,\"Paper $\") or contains(@alt,\"paper\") or contains(@alt,\"Business Cards for $\") or contains(@alt,\"Now Businesses Save More\") or contains(@alt,\"Laptop Bundles starting at\"))]\n|\n/descendant::span[contains(text(),\"delivery\")]\n|\n/descendant::a[contains(text(),\"$\") or contains(text(),\"%\") or contains(text(),\"Free\")]\n|\n/descendant::td[contains(text(),\"%\") and not (contains(.,\"Bonus Rewards\"))]\n|\n/descendant::b[contains(text(),\"$\")]\n"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"office DEPOT\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      },
      {
        "id": "cd344525-1ad1-424f-816e-139309b71062",
        "repeating": true,
        "locations": [
          "/descendant::tr[@class=\"mobile-hidden\"]/descendant::img[contains(@class,\"image\")][contains(@alt,\"%\") or contains(@alt,\"$\") or contains(@alt,\"Save\") or contains(@alt,\"Sale\") or contains(@alt,\"Free\")][not (contains(@alt,\"Tech Support\") or contains(@alt,\"starting at $\") or contains(@alt,\"Paper\")  or contains(@alt,\"paper\") or contains(@alt,\"Business Cards for $\") or contains(@alt,\"Now Businesses Save More\") or contains(@alt,\"Laptop Bundles starting at\"))] \n|\n/descendant::tr[@class=\"mobile-hidden\"]/descendant::img[not(@class)][contains(@alt,\"%\") or contains(@alt,\"$\") or contains(@alt,\"Save\") or contains(@alt,\"Sale\") or contains(@alt,\"Free\")][not (contains(@alt,\"Tech Support\") or contains(@alt,\"starting at $\") or contains(@alt,\"Paper\") or contains(@alt,\"paper\") or contains(@alt,\"Business Cards for $\") or contains(@alt,\"Now Businesses Save More\") or contains(@alt,\"Laptop Bundles starting at\"))]\n|\n/descendant::img[contains(@class,\"image\")]/parent::a/parent::td/parent::tr[not(@class)]/descendant::img[contains(@alt,\"%\") or contains(@alt,\"$\") or contains(@alt,\"Save\") or contains(@alt,\"Sale\") or contains(@alt,\"Free\")][not (contains(@alt,\"Tech Support\") or contains(@alt,\"\nstarting at $\") or contains(@alt,\"Paper $\") or contains(@alt,\"paper\") or contains(@alt,\"Business Cards for $\") or contains(@alt,\"Now Businesses Save More\") or contains(@alt,\"Laptop Bundles starting at\"))]\n|\n/descendant::span[contains(text(),\"delivery\")]\n|\n/descendant::a[contains(text(),\"$\") or contains(text(),\"%\") or contains(text(),\"Free\")]\n|\n/descendant::td[contains(text(),\"%\") and not (contains(.,\"Bonus Rewards\"))]\n|\n/descendant::b[contains(text(),\"$\")]\n"
        ],
        "type": "http://schema.org/ImageObject",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@src"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@alt | ./@title"
                }
              ]
            },
            "name": "http://schema.org/_imgtext",
            "relative": true,
            "transient": true,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "85290066-92b0-4fc9-91c8-939b6db4bd9d",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "93554bc9-c9bd-41fa-9815-ef300e6aa5cc",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      },
      {
        "from": {
          "entityRule": "85290066-92b0-4fc9-91c8-939b6db4bd9d",
          "matchAttr": "http://schema.org/description"
        },
        "to": {
          "entityRule": "cd344525-1ad1-424f-816e-139309b71062",
          "matchAttr": "http://schema.org/_imgtext"
        },
        "predicate": "http://schema.org/image",
        "cardinality": "ONE_TO_ONE",
        "matchThreshold": ".7"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

/* OLD NAVY email.oldnavy.com */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "6090ac3a-250c-46c8-b207-dbbcbf2e2f83",
        "repeating": true,
        "locations": [
          "/descendant::img[contains(@alt,\"%\") or \ncontains(translate(@alt,\"FRE\", \"fre\"), \"free\") or \ncontains(translate(@alt,\"POINTS\", \"points\"), \"points\") and contains(@alt, \"$\")]\n|\n/descendant::b[contains(translate(.,\"REWARDS\",\"rewards\"),\"rewards\")]\n/ancestor::td[1]\n[not (contains(translate(.,\"GAPINC\",\"gapinc\"),\"gap inc\"))]\n|\n//b[contains(translate(text(), \"FORTHEAM\", \"fortheam\"),\"for the fam\") or\ncontains(translate(text(), \"CLEARN\", \"clearn\"),\"clearance\") and (contains(text(),\"$\")  or contains(text(), \"%\")) or\ncontains(translate(text(), \"POINTS\", \"points\"),\"points\") or\ncontains(translate(text(), \"SUPERCAH\", \"supercah\"),\"super cash\") or\ncontains(translate(.,\"OF\",\"of\"),\"off\") and contains(.,\"$\")]\n[not (contains(translate(text(),\"NOTVALID\",\"notvalid\"),\"not valid\") or contains(translate(text(),\"EXCLUDS\",\"excluds\"),\"excludes\"))]\n|\n//a[contains(translate(.,\"OF\",\"of\"),\"% off\") or\ncontains(translate(.,\"SALE\",\"sale\"),\"sale\")]\n"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@alt | ."
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  var replaceArr = [\n    {oldStr: /REWARDSEXPIRES/i, newStr: \"REWARDS. EXPIRES\"},\n    {oldStr: /[±\\*:]/gi, newStr: \"\"},\n    {oldStr: /SHOP NOW/i, newStr: \"\"},\n    {oldStr: /^(OH & btw,|AND|PLUS[,!])/i, newStr: \"\"},\n  ];\n  \n  replaceArr.forEach(function(el){\n    data = data.replace(el.oldStr, el.newStr);\n  });\n  \n  return data.trim();\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "concat(., ./@alt, \"###\", //text()[contains(translate(.,\"OFERVALID\",\"ofervalid\"),\"offer valid\")]/ancestor::td[1])"
                }
              ]
            },
            "name": "http://schema.org/validThrough",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  if(/EXPIRES\\s*(\\d{1,2}\\/\\d{1,2})/.test(data)) return data.replace(/.*EXPIRES\\s*(\\d{1,2}\\/\\d{1,2}).*/, \"$1\") + \"/1970\";\n  var splitData = data.split(\"###\");\n\n  var keywords = [\n    /\\d{1,2}% off/i,\n    /2X Points/i,\n    /FREE SHIPPING/i,\n    /Super Cash:/i,\n    /$15 OFF $50:/i,\n    /Clearance/i\n  ];\n\n  keywords.forEach(function(el){\n    if (el.test(splitData[0])) splitData[0] = el.exec(splitData[0])[0];\n  });\n\n  splitData[1] = splitData[1].slice(splitData[1].toLowerCase().indexOf(splitData[0].toLowerCase()));\n  splitData[1] = splitData[1].slice(0, splitData[1].search(/11:59 pm/i));\n\n  return /(through|to|-)\\s+(\\d{1,2}\\/){2}\\d{2,4}/i.test(splitData[1]) ? /(through|to|-)\\s+(\\d{1,2}\\/){2}\\d{2,4}/i.exec(splitData[1])[0].replace(/(through|to|-)\\s+/, \"\") : \"\";\n}",
            "dataTypes": [
              "DateTime"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "../@href | /descendant::a[contains(translate(.,\"WEBROWSR\",\"webrowsr\"),\"web browser\")]/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_footer": "/descendant::text()[contains(translate(.,\"GAPINC\",\"gapinc\"),\"gap inc\")]/ancestor::td[1]",
          "_raw_validThrough": "//text()[contains(translate(.,\"OFERVALID\",\"ofervalid\"),\"offer valid\")]/ancestor::td[1] |\n/descendant::b[contains(translate(.,\"REWARDS\",\"rewards\"),\"rewards\")]\n/ancestor::td[1]\n[not (contains(translate(.,\"GAPINC\",\"gapinc\"),\"gap inc\"))]"
        }
      },
      {
        "id": "2a9923fa-4efe-4635-8aaa-79f33f2123b6",
        "repeating": true,
        "locations": [
          "/descendant::img[contains(@alt,\"%\") or contains(@alt,\"FREE SHIPPING\")]\n|\n/descendant::b[contains(.,\"for the fam\") or contains(.,\"Clearance. Women\") or contains(.,\"Free shipping\")]\n|\n/descendant::a[contains(.,\"You have\") and contains(.,\"in Rewards\")]/ancestor::td[1]\n|\n/descendant::b[contains(.,\" REWARDS\")]/ancestor::td[1]"
        ],
        "type": "http://schema.org/ImageObject",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@src"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ]
      },
      {
        "id": "c0d7d87b-883e-461d-9c98-1ea2bdb19083",
        "repeating": true,
        "locations": [
          "/descendant::img[contains(@alt,\"%\") or contains(@alt,\"FREE SHIPPING\")]\n|\n/descendant::b[contains(.,\"for the fam\") or contains(.,\"Clearance. Women\") or contains(.,\"Free shipping\")]\n|\n/descendant::a[contains(.,\"You have\") and contains(.,\"in Rewards\")]/ancestor::td[1]\n|\n/descendant::b[contains(.,\" REWARDS\")]/ancestor::td[1]"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"OLD NAVY\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "6090ac3a-250c-46c8-b207-dbbcbf2e2f83",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "c0d7d87b-883e-461d-9c98-1ea2bdb19083",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      },
      {
        "from": {
          "entityRule": "6090ac3a-250c-46c8-b207-dbbcbf2e2f83",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "2a9923fa-4efe-4635-8aaa-79f33f2123b6",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/image",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

/* PRINCESS CRUISES em.princess.com */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "2ce1e250-07f0-44c2-8a8b-b24a277f2d57",
        "repeating": true,
        "locations": [
          "//img[contains(@alt,\"$\")]"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "concat(./ancestor::table[2], \"~~~\", ./@alt)"
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  var replaceArr = [\n    {oldStr: /.*\\| exclusive offer:/, newStr: \"Exclusive offer:\"}, \n    {oldStr: /~~~.*\\|/, newStr: \"\"},\n    {oldStr: / from\\*(Was)/g, newStr: \": $1\"},\n    {oldStr: /(\\d)([A-z])/g, newStr: \"$1 $2\"},\n    {oldStr: /([a-z]|\\W)([A-Z])/g, newStr: \"$1 $2\"},\n    {oldStr: /\\s*BOOK\\s*NOW\\*\\s*Taxes,\\s*Fees\\s*\\&\\s*Port\\s*Expenses\\s*of\\s*\\$\\d+-\\$\\d+\\s*are\\s*additional\\.\\s*Up/, newStr: \". Also, up\"},\n    {oldStr: /‡.*/, newStr: \".\"},\n    {oldStr: /\\( /, newStr: \"(\"},\n    {oldStr:/[\\*©®ǂ‡†±→§™¹›]/g, newStr: \"\"},\n    \n  ];\n  \n  replaceArr.forEach(function(el){\n    data = data.replace(el.oldStr, el.newStr);\n  });\n  \n  return data;\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./parent::a/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "substring-after(/descendant::text()[contains(translate(.,\"OFERXPIRS\",\"oferxpirs\"),\"offer expires:\")], \":\")"
                }
              ]
            },
            "name": "http://schema.org/validThrough",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "DateTime"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_raw_validThrough": "substring-after(/descendant::text()[contains(translate(.,\"OFERXPIRS\",\"oferxpirs\"),\"offer expires:\")], \":\")",
          "_footer": "/descendant::text()[contains(translate(.,\"PRINCESCULTD\",\"princescultd\"),\"princess cruise lines, ltd\")]/ancestor::table[1]"
        },
        "hintsJavascript": "function transform(data) {\n  var ftr = data.get(\"_footer\")[0].replace(/[A-z0-9.%+-_]{2,64}\\@[A-z0-9.]{2,64}/g,'');\n  var rvt = data.get(\"_raw_validThrough\")[0];\n\n  return {\n    '_footer': [ftr],\n    '_raw_validThrough': [rvt]\n  };\n}"
      },
      {
        "id": "f517622f-f496-496f-83b5-f0b585dedf8a",
        "repeating": true,
        "locations": [
          "//img[contains(@alt,\"$\")]"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "'Princess Cruises'"
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      },
      {
        "id": "018a79d7-c8c6-43d0-80db-a98125846b10",
        "repeating": true,
        "locations": [
          "//img[contains(@alt,\"$\")]"
        ],
        "type": "http://schema.org/ImageObject",
        "javascript": null,
        "entityIdRef": null,
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@src"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "2ce1e250-07f0-44c2-8a8b-b24a277f2d57",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "f517622f-f496-496f-83b5-f0b585dedf8a",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      },
      {
        "from": {
          "entityRule": "2ce1e250-07f0-44c2-8a8b-b24a277f2d57",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "018a79d7-c8c6-43d0-80db-a98125846b10",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/image",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

/* SAFEWAY email.safeway.com */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "14691b45-42cc-443f-b2f9-58e7a53c78b1",
        "repeating": true,
        "locations": [
          "//descendant::div[contains(text(), \"$\")]"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "."
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  if(data.match(/\\$[\\d]+\\sOff[\\s\\+a-z]+/)){\n    return data.match(/\\$[\\d]+\\sOff[\\s\\+a-z]+/i)[0].trim();\n  }\n  return \"\";\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "."
                }
              ]
            },
            "name": "http://schema.org/validThrough",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  return data.match(/Order\\sby/) ? \n  data.match(/Order\\sby\\s[\\d\\/]+/)[0].slice(\"Order by \".length) : \n  \"\";\n}",
            "dataTypes": [
              "DateTime"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "//descendant::a[contains(text(), \"View\")]/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_raw_validThrough": ".",
          "_footer": "/descendant::div[contains(.,\"Limited time\")]"
        },
        "hintsJavascript": null
      },
      {
        "id": "024f7ada-9f5b-4026-8c86-258b1aa47d5d",
        "repeating": true,
        "locations": [
          "//descendant::div[contains(text(), \"$20 Off\")]"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": null,
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"SAFEWAY\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "14691b45-42cc-443f-b2f9-58e7a53c78b1",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "024f7ada-9f5b-4026-8c86-258b1aa47d5d",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

/* SEARS value.sears.com */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "f5a298ac-6358-4606-82fb-a1e4f1639819",
        "repeating": true,
        "locations": [
          "/descendant::img[contains(translate(@alt,\"OF\",\"of\"),\"% off\") or\ncontains(translate(@alt,\"SALE\",\"sale\"),\"sale\") or \ncontains(translate(@alt,\"BLOWUT\",\"blowut\"),\"blowout\") or  \ncontains(translate(@alt,\"FRESHIPING\",\"freshiping\"),\"free shipping\") or\ncontains(translate(@alt,\"CASHBCK\",\"cashbck\"),\"cashback\") or \ncontains(translate(@alt,\"EXCLUSIV\",\"exclusiv\"), \"exclusive\") or \ncontains(translate(@alt,\"REG\",\"reg\"), \"reg.\") or \n(contains(@alt, \"$\") and contains(translate(@alt,\"OF\",\"of\"), \"off\"))]\n[not (contains(translate(@alt,\"EXCLUSIONSAPY\",\"exclusionsapy\"),\"exclusions apply\") or contains(translate(@alt,\"VALIDUNTL\",\"validuntl\"), \"valid until\") or contains(translate(@alt,\"SHOPFREING\",\"shopfreing\"), \"shop free shipping\"))]"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@alt"
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data) {\n  if(!data) return null;\n\n\n  var replaceStrings = [\n    {oldStr:/[\\*©®ǂ‡†±→§™¹›]/g, newStr: \"\"},\n    {oldStr: /\\|\\s+SHOP (ALL DEALS|NOW).*/gi, newStr: \"\"},\n    {oldStr: /\\|\\s+FIND A STORE.*/gi, newStr: \"\"},\n    {oldStr: /I agree to receive recurring autodialed messages.*/gi, newStr: \"\"},\n    {oldStr: /\\|\\s+ORDER BY 11:59.*/gi, newStr: \"\"},\n    {oldStr: /\\(Restrictions apply\\.\\) /i, newStr: \"\"},\n    {oldStr: /Up to \\$30 in points\\./i, newStr: \"\"},\n    {oldStr: /^-/i, newStr: \"\"},\n    {oldStr: /^\\+/i, newStr: \"\"},\n    {oldStr: /\\| By texting the code JOLLY.*/i, newStr: \"\"},\n    //{oldStr: //i, newStr: \"\"},\n  ];\n\n  replaceStrings.forEach(function(el) {\n    data = data.replace(el.oldStr, el.newStr);\n  });\n\n return data.trim();\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./parent::a/@href\n|\n/descendant::a[contains(.,\"View Online\")]/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "concat(./@alt, \" ~~~ \", ./following::img[contains(@alt,\"Offer ends\") or contains(@alt, \"Offers end\") or contains(@alt, \"Event ends\") or contains(@alt, \"Offer valid\") or contains(@alt, \"OFfer ends\")][1]/@alt)"
                }
              ]
            },
            "name": "http://schema.org/validThrough",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data,node,headers){\n  if(/(LAST DAY!|GET IT BY)/.test(data)) {\n    var n = headers.get(\"Date\");\n    var n1 = new Date(n * 1000);\n    var day1 = n1.getDate();\n    var mon1 = n1.getMonth();\n    var vt = new Date(\"1970\", mon1, day1);\n    return vt;\n  }\n  \n  if(/Text JOLLY/.test(data)) return \"\";\n  if(!/(Event|Offer|valid)s?\\s(ends?|valid|until)\\s(\\d{1,2}\\/){2}(\\d{2,4})/i.test(data)) return \"\";\n\n\n  var stringsArr = [\n    /\\$\\d{1,3}(\\.\\d{1,2})? CASHBACK/,\n    /†/,\n    /%\\sOFF/,\n    /\\$\\d{1,4}\\sOFF/,\n    /PRIVATE\\sEVENT/,\n    /FAMILY & FRIENDS/,\n    /BLOWOUT/,\n    /FREE SHIPPING/,\n    /Reg./,\n  ];\n\n  for(var i = 0; i < stringsArr.length; i++){\n  \tif(stringsArr[i].test(data)) return /(Event|Offer|valid)s?\\s(ends?|valid|until)\\s(\\d{1,2}\\/){2}(\\d{2,4})/i.exec(data)[0].replace(/[^(\\d{1,2}\\/){2}(\\d{2,4})]/g,\"\") || \"\";\n  }\n\n\n  return \"\";\n}",
            "dataTypes": [
              "DateTime"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_raw_validThrough": "/descendant::img[contains(@alt,\"Offer ends\") or contains(@alt,\"offer ends\")]/@alt",
          "_footer": "/descendant::text()[contains(.,\"Sears Brands\")]/parent::td"
        }
      },
      {
        "id": "12cd83a0-8963-47e3-b898-460b54103aa2",
        "repeating": true,
        "locations": [
          "/descendant::img[contains(@alt,\"% OFF\") or\ncontains(@alt,\"Sale\") or \ncontains(@alt,\"BLOWOUT\") or \ncontains(@alt,\"GET IT BY CHRISTMAS\") or \ncontains(@alt,\"FREE SHIPPING\") or\ncontains(@alt,\"Free Shipping\") or \ncontains(@alt,\"freestorepickup\") or \ncontains(@alt,\"IN-VEHICLE PICKUP\") or \ncontains(@alt,\"CASHBACK\") or \ncontains(@alt, \"exclusive\") or \ncontains(@alt, \"Reg.\") or \n(contains(@alt, \"$\") and contains(@alt, \"off\"))]\n[not (contains(@alt,\"Exclusions apply\") or contains(@alt, \"valid until\") or contains(@alt, \"SHOP FREE SHIPPING\"))]\n"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"sears\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      },
      {
        "id": "ec31bc72-acba-4648-850f-a16ef42c5a59",
        "repeating": true,
        "locations": [
          "/descendant::img"
        ],
        "type": "http://schema.org/ImageObject",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@src"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "f5a298ac-6358-4606-82fb-a1e4f1639819",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "ec31bc72-acba-4648-850f-a16ef42c5a59",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/image",
        "cardinality": "ONE_TO_ONE"
      },
      {
        "from": {
          "entityRule": "f5a298ac-6358-4606-82fb-a1e4f1639819",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "12cd83a0-8963-47e3-b898-460b54103aa2",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

/* SEPHORA beauty.sephora.com */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "259fa107-ae46-4563-8ec8-86d9275d2492",
        "repeating": true,
        "locations": [
          "//div[@id = \"DESKTOP\"]/descendant::img[contains(translate(@alt,\"XPERDOLA\",\"xperdola\"), \"2x per dollar\") or \ncontains(translate(@alt,\"TRIALSZE\",\"trialsze\"), \"trial size\") or \ncontains(translate(@alt,\"REWADSBZ\",\"rewardsbz\"), \"rewards bazaar\") or \ncontains(translate(@alt,\"POINTREWADS\",\"pointrewads\"),\"point rewards\") or \ncontains(translate(@alt,\"SHIPING\",\"shiping\"),\"shipping\") or \ncontains(translate(@alt,\"POINTSER\",\"pointser\"),\"points per\") or \ncontains(translate(@alt,\"FRE\",\"fre\"),\"free\")  or \ncontains(translate(@alt,\"USECOD\",\"usecod\"),\"Use code\") or \ncontains(translate(@alt,\"ROUGEWAD\",\"rougewad\"), \"rouge reward\") or \ncontains(translate(@alt,\"OF\",\"of\"),\"% off\") or\ncontains(translate(@alt,\"OF\",\"of\"),\"off\" and (contains(@alt,\"$\") or contains(@alt,\"%\")))]"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@alt"
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  var replaceStrArr = [\n    {oldStr: /[\\*©®ǂ†→§™¹>]/g, newStr: \"\"},\n    //{oldStr: //i, newStr: \"\"},\n    //{oldStr: //i, newStr: \"\"},\n  ];\n\n  replaceStrArr.forEach(function(el) {\n    data = data.replace(el.oldStr, el.newStr);\n  });\n\n  return data.trim() || \"\";\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./parent::a/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@alt"
                }
              ]
            },
            "name": "http://schema.org/validThrough",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  var testRegex = /In\\sstore\\sand\\sonline,\\sEnds\\s(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday)\\s(\\d{1,2}\\/\\d{1,2})/;\n  if(testRegex.exec(data)) return \"1970/\" + testRegex.exec(data)[0].replace(testRegex, \"$2\");\n  return \"\";\n}",
            "dataTypes": [
              "DateTime"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_footer": "/descendant::text()[contains(.,\"JCPenney\")]/parent::*",
          "_raw_validThrough": "./@alt"
        },
        "hintsJavascript": null
      },
      {
        "id": "53021d0e-c463-4bbb-b845-4c9bd73232a0",
        "repeating": true,
        "locations": [
          "/descendant::img"
        ],
        "type": "http://schema.org/ImageObject",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@src"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ]
      },
      {
        "id": "5dcbab78-f12a-49b6-95e0-9fb23fd7c56f",
        "repeating": true,
        "locations": [
          "//div[@id = \"DESKTOP\"]/descendant::img[contains(translate(@alt,\"XPERDOLA\",\"xperdola\"), \"2x per dollar\") or \ncontains(translate(@alt,\"TRIALSZE\",\"trialsze\"), \"trial size\") or \ncontains(translate(@alt,\"REWADSBZ\",\"rewardsbz\"), \"rewards bazaar\") or \ncontains(translate(@alt,\"POINTREWADS\",\"pointrewads\"),\"point rewards\") or \ncontains(translate(@alt,\"SHIPING\",\"shiping\"),\"shipping\") or \ncontains(translate(@alt,\"POINTSER\",\"pointser\"),\"points per\") or \ncontains(translate(@alt,\"FRE\",\"fre\"),\"free\")  or \ncontains(translate(@alt,\"USECOD\",\"usecod\"),\"Use code\") or \ncontains(translate(@alt,\"ROUGEWAD\",\"rougewad\"), \"rouge reward\") or \ncontains(translate(@alt,\"OF\",\"of\"),\"% off\") or\ncontains(translate(@alt,\"OF\",\"of\"),\"off\" and (contains(@alt,\"$\") or contains(@alt,\"%\")))]"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"SEPHORA\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ],
        "hints": {}
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "259fa107-ae46-4563-8ec8-86d9275d2492",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "5dcbab78-f12a-49b6-95e0-9fb23fd7c56f",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      },
      {
        "from": {
          "entityRule": "259fa107-ae46-4563-8ec8-86d9275d2492",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "53021d0e-c463-4bbb-b845-4c9bd73232a0",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/image",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  },
  "preCleanInfo": [
    {
      "regexStr": "\\/\\*<\\!\\[cdata\\[>\\*\\/",
      "replacement": "",
      "replaceAll": false
    }
  ]
}

/* SHOP YOUR WAY REWARDS SHOPYOURWAYREWARDS rewards.shopyourwayrewards.com */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "380be5ca-e482-48e1-8847-63ffade6f9ea",
        "repeating": true,
        "locations": [
          "/descendant::img[contains(@alt,\"CASHBACK\")]"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@alt"
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  var replaceStrings = [\n    {oldStr:/[\\*©®ǂ†→§™¹›]/g, newStr: \"\"},\n  ];\n\n  replaceStrings.forEach(function(el) {\n    data = data.replace(el.oldStr, el.newStr);\n  });\n\n  return data.trim() || \"\";\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./parent::a/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "/descendant::a[contains(.,\"Offer ends\") or contains(.,\"Offers end\")]"
                }
              ]
            },
            "name": "http://schema.org/validThrough",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data) {\n  return /Offers\\send\\s([\\d]{1,2}\\/){2}[\\d]{2,4}?/.exec(data)[0].replace(/Offers\\send\\s/,\"\") || \"\";\n}",
            "dataTypes": [
              "DateTime"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_raw_validThrough": "/descendant::a[contains(.,\"Offer ends\") or contains(.,\"Offers end\")]",
          "_footer": "descendant::text()[contains(.,\"Sears Brands, LLC\")]/parent::td/parent::tr/parent::tbody"
        }
      },
      {
        "id": "36e0e24e-7605-4408-88ff-1f1e6f5a5c5e",
        "repeating": true,
        "locations": [
          "/descendant::img[contains(@alt,\"CASHBACK\") and not (contains(@alt,\"GasBuddy\"))]"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"SHOPYOURWAY\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      },
      {
        "id": "161da46f-9b05-49e9-8ff6-cf6d164814dc",
        "repeating": true,
        "locations": [
          "/descendant::img[contains(@alt,\"CASHBACK\") and not (contains(@alt,\"GasBuddy\"))]"
        ],
        "type": "http://schema.org/ImageObject",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@src"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "380be5ca-e482-48e1-8847-63ffade6f9ea",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "36e0e24e-7605-4408-88ff-1f1e6f5a5c5e",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      },
      {
        "from": {
          "entityRule": "380be5ca-e482-48e1-8847-63ffade6f9ea",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "161da46f-9b05-49e9-8ff6-cf6d164814dc",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/image",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

/* THE VITAMIN SHOPPE e.vitaminshoppe.com */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "7807681e-2727-4735-9f90-58ddbcf27f83",
        "repeating": true,
        "locations": [
          "/descendant::td/descendant::text()[contains(.,\"%\") or contains(.,\"$\")]"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "."
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  return data.match(/[\\w\\s$%+,&\\'\\-(\\)]+\\./i)[0] || \"\";\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "/descendant::a[contains(text(),\"View in web-browser\")]/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "."
                }
              ]
            },
            "name": "http://schema.org/validThrough",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  if (data.match(/Offer\\svalid\\s(\\d{1,2}\\/){2}\\d{2,4}\\sthrough\\s(\\d{1,2}\\/){2}\\d{2,4}/)) return data.match(/Offer\\svalid\\s(\\d{1,2}\\/){2}\\d{2,4}\\sthrough\\s(\\d{1,2}\\/){2}\\d{2,4}/)[0].replace(/Offer\\svalid\\s(\\d{1,2}\\/){2}\\d{2,4}\\sthrough\\s/, \"\");\n  if (data.match(/Offer\\sextended\\s(\\d{1,2}\\/)/)) return data.match(/Offer\\sextended\\s(\\d{1,2}\\/){2}\\d{2,4}/)[0].replace(/Offer\\sextended\\s/,\"\")\n  return \"\";\n}",
            "dataTypes": [
              "DateTime"
            ],
            "mandatory": false
          }
        ]
      },
      {
        "id": "3d11c3d5-67fa-42b3-8dbf-329e0e0171d6",
        "repeating": true,
        "locations": [
          "/descendant::td/descendant::text()[contains(.,\"%\") or contains(.,\"$\")]"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": null,
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"THE VITAMIN SHOPPE\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "7807681e-2727-4735-9f90-58ddbcf27f83",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "3d11c3d5-67fa-42b3-8dbf-329e0e0171d6",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

/* TOTAL WINE email-totalwine.com */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "20dd3290-2626-436c-971f-fa579ab7187c",
        "repeating": true,
        "locations": [
          "/descendant::strong[contains(.,\"%\")]"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "."
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n\t//Creating an array with all the distinction marks that might be at the end of the text\n  var marksArr = [\":\", \"?\", \".\", \";\"];\n\n\t//Ternary operator to clean up the text from the last character and add a full stop\n  return marksArr.indexOf[data[data.length-1]] !== -1 ?\n  \t\t\t\tdata.slice(0, data.length-1) + \".\" : \n  \t\t \t\tdata + \".\" || \"\";\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "/descendant::a[contains(text(),\"Shop Now\")]/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "/descendant::td[contains(text(),\"valid through\")]"
                }
              ]
            },
            "name": "http://schema.org/validThrough",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data) {\n\treturn data.match(/valid\\sthrough\\s[\\d\\/]+/i)[0].replace(\"valid through\", \"\").trim() || \"\";\n}",
            "dataTypes": [
              "DateTime"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_raw_validThrough": "/descendant::td[contains(text(),\"valid through\")]",
          "_footer": "/descendant::strong[contains(text(),\"Excludes\")]/parent::td"
        }
      },
      {
        "id": "af8a4ba4-e0ba-4d16-8a18-312fa3765161",
        "repeating": true,
        "locations": [
          "/descendant::strong[contains(.,\"%\")]"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": null,
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"Total Wine\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "20dd3290-2626-436c-971f-fa579ab7187c",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "af8a4ba4-e0ba-4d16-8a18-312fa3765161",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}

/* WARWICK HOTELS warwickhotels.com */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "60a840ad-04d6-45c7-a6bf-7f2b438b775c",
        "repeating": true,
        "locations": [
          "/descendant::img[contains(@alt,\"%\")]"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@alt"
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./parent::a/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_footer": "/descendant::text()[contains(.,\"Warwick Hotels\")]/ancestor::td[1]"
        }
      },
      {
        "id": "7b23ae22-6e87-488f-a471-5e0a45e5436b",
        "repeating": true,
        "locations": [
          "/descendant::img[contains(@alt,\"%\")]"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": null,
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"Warwick Hotels\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      },
      {
        "id": "5beb8bf8-7c63-4591-9922-12fcc3724ebb",
        "repeating": true,
        "locations": [
          "/descendant::img[contains(@alt,\"%\")]"
        ],
        "type": "http://schema.org/ImageObject",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@src"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "60a840ad-04d6-45c7-a6bf-7f2b438b775c",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "7b23ae22-6e87-488f-a471-5e0a45e5436b",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      },
      {
        "from": {
          "entityRule": "60a840ad-04d6-45c7-a6bf-7f2b438b775c",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "5beb8bf8-7c63-4591-9922-12fcc3724ebb",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/image",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}



/* FBMTA.COM */
/* APLEBEES aplebees.fbmta.com */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "d92d1c6e-d001-4182-853f-2b05a09a89ee",
        "repeating": true,
        "locations": [
          "/descendant::table[@class='desktop']/descendant::img[contains(@alt,\"99\")]"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@alt"
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "/descendant::img[contains(@alt,\"Order Now\") or contains(@alt,\"Order now\")]/parent::a/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ],
        "hintsJavascript": "function transform(data) {\n\tvar n=data.get(\"_footer\");\n\tn=n.toString();\n\tn= n.replace(/[A-z0-9.%+-_]{2,64}\\@[A-z0-9.]{2,64}/g,'');\n\treturn {'_footer': [n]};\n}",
        "hints": {
          "_footer": "/descendant::span[contains(text(),\"This email was sent to\")]"
        }
      },
      {
        "id": "f53b60f1-64be-4853-8862-9ec18393e40d",
        "repeating": true,
        "locations": [
          "/descendant::table[@class='desktop']/descendant::img[contains(@alt,\"99\")]"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": null,
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "/descendant::span[contains(text(),\"To ensure delivery\")]"
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  return data.replace(/.*@/, \"\").replace(/\\.fbmta\\.com.*/, \"\");\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      },
      {
        "id": "2df1786f-e585-49ba-8faa-64c337c75140",
        "repeating": true,
        "locations": [
          "/descendant::table[@class='desktop']/descendant::img[contains(@alt,\"99\")]"
        ],
        "type": "http://schema.org/ImageObject",
        "javascript": null,
        "entityIdRef": null,
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./@src"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "d92d1c6e-d001-4182-853f-2b05a09a89ee",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "f53b60f1-64be-4853-8862-9ec18393e40d",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      },
      {
        "from": {
          "entityRule": "d92d1c6e-d001-4182-853f-2b05a09a89ee",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "2df1786f-e585-49ba-8faa-64c337c75140",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/image",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}
/* THE WINGHOUSE BAR & GRILL kerswinghouse.fbmta.com */
{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Coupon"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "be1d2e8d-cf2e-4178-8b31-460aa884366f",
        "repeating": true,
        "locations": [
          "/descendant::span[contains(text(),\"$\") or contains(.,\"FREE\") or contains(text(),\"Drink specials\")]"
        ],
        "type": "http://schema.org/Coupon",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "."
                }
              ]
            },
            "name": "http://schema.org/description",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  return data.split(\"Problem viewing\")[0] || \"\";\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./descendant::a/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "_footer": "/descendant::p[contains(text(),\"The WingHouse\")]/parent::span/parent::td/parent::tr/parent::tbody/parent::table/parent::td/parent::tr/parent::tbody/parent::table"
        }
      },
      {
        "id": "32533f15-8f07-48a1-8bcd-e0c56aea2d2b",
        "repeating": true,
        "locations": [
          "/descendant::span[contains(text(),\"$\") or contains(.,\"FREE\") or contains(text(),\"Drink specials\")]"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"The WingHouse Bar & Grill\""
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "be1d2e8d-cf2e-4178-8b31-460aa884366f",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "32533f15-8f07-48a1-8bcd-e0c56aea2d2b",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/broker",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}
