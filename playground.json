{
  "extract": {
    "extractEmbedded": false,
    "source": null,
    "schema": [
      {
        "url": "http://ws.rmf.yahoo.com:4080/rmf/v1/schema?type=schema.org&name=y.2.0&format=json",
        "ns": "http://schema.org",
        "context": {
          "@type": [
            "Invoice"
          ]
        }
      }
    ],
    "entityRules": [
      {
        "id": "931e95e6-6011-491a-81b9-ee2246fb0554",
        "repeating": true,
        "locations": [
          "/"
        ],
        "type": "http://schema.org/Invoice",
        "javascript": "function transform (data){\n\t  var status =  Util.getSchemaAttributeFirstValue(data, \"http://schema.org/paymentStatus\");\n  \tif (status){\n    \treturn data;\n    }\n  \telse return null;\n}",
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./descendant::p[contains(.,\"Customer #\") or contains(.,\"Account #\") or contains(.,\"Customer ID#\") or contains(.,\"Customer ID #\")][not (contains(text(),\"CashNetUSA\"))]",
                  "regex": "\\d+"
                }
              ]
            },
            "name": "http://schema.org/accountId",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "."
                }
              ]
            },
            "name": "http://schema.org/paymentStatus",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data) {\n  var textMatchObj = {\n    'The remaining payments set up on your account': 'PaymentDue',\n    'This is a reminder about your minimum payment': 'PaymentDue',\n    'You are late in making your payment': 'PaymentPastDue',\n    'Amount Past Due:': 'PaymentPastDue',\n    'Thank you for your recent payment': 'PaymentComplete',\n    'This is confirmation of your recent payment': 'PaymentComplete',\n    //'keyword4': 'PaymentDeclined',\n    //'keyword5': 'PaymentAutomaticallyApplied',\n    //'keyword6': 'PaymentScheduled'\n  };\n  for(var key in textMatchObj){\n  if(data.trim().indexOf(key) !== -1) return textMatchObj[key];\n}\nreturn \"\";\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"http//:www.CashNetUSA.com\""
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "/descendant::td[contains(.,\"Date\")]/following::td[contains(.,\"-\")]"
                },
                {
                  "xpath": "substring-after(./descendant::*[contains(text(),'due')],\"on\")"
                },
                {
                  "xpath": "substring-after(./descendant::p[contains(text(),'is due')], \"On\")"
                },
                {
                  "xpath": "/descendant::td[contains(text(),\"Bank Account\")]/preceding-sibling::td[1]"
                },
                {
                  "xpath": "/descendant::td[contains(.,\"-\")][following::td[2][contains(.,\"Bank Account\")]]"
                }
              ]
            },
            "name": "http://schema.org/paymentDue",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "DateTime"
            ],
            "mandatory": false
          }
        ],
        "hints": {
          "domain": "'email.cashnetusa.com'"
        }
      },
      {
        "id": "21d6d9d2-73d1-450e-83c6-9fd9bf601d24",
        "repeating": true,
        "locations": [
          "/"
        ],
        "type": "http://schema.org/PriceSpecification",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./descendant::*[contains(text(),'Minimum')]/following::text()"
                }
              ]
            },
            "name": "http://schema.org/price",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  if(data.match(/\\$[\\d\\,\\.]{4,}/)){\n    var price = data.replace(/\\$/,'')\n    var amt = parseFloat(price.match(/[\\$\\d\\,\\.]+/)[0].replace(/,/,'')).toFixed(2);\n    return amt;\n  } else {\n    return null;\n  }\n}",
            "dataTypes": [
              "Number"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./descendant::*[contains(text(),'Minimum')]/following::text()"
                }
              ]
            },
            "name": "http://schema.org/priceCurrency",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  var currencies = [\n    {name: \"AUD\", symbol: \"A$\"},\n    {name: \"AUD\", symbol: \"AU$\"},\n    {name: \"AUD\", symbol: \"AUD\"},\n    {name: \"EGP\", symbol: \"ج.م\"},\n    {name: \"EUR\", symbol: \"€\"},\n    {name: \"GBP\", symbol: \"£\"},\n    {name: \"HUF\", symbol: \"Ft\"},\n     {name: \"IDR\", symbol: \"Rp\"},\n    {name: \"IND\", symbol: \"Rs\"},\n    {name: \"INR\", symbol: \"₹\"},\n    {name: \"MYR\", symbol: \"RM\"},\n    {name: \"NOK\", symbol: \"kr\"},\n    {name: \"PEN\", symbol: \"S/\"},\n    {name: \"PHP\", symbol: \"₱\"},\n    {name: \"PLN\", symbol: \"zł\"},\n    {name: \"QAR\", symbol: \"ر.ق\"},\n    {name: \"RON\", symbol: \"lei\"},\n    {name: \"THB\", symbol: \"฿\"},\n    {name: \"TRY\", symbol: \"TL\"},\n    {name: \"USD\", symbol: \"$\"},\n    {name: \"UGX\", symbol: \"Ush\"},\n    {name: \"VND\", symbol: \"₫\"},\n    {name: \"USD\", symbol: \"USD\"}\n  ];\n\n  for (var i = 0; i < currencies.length; i++) {\n    if (data.indexOf(currencies[i].symbol) !== -1) return currencies[i].name;\n  }\n\n  return \"\";\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      },
      {
        "id": "d5f6938e-6765-404f-b8c7-b5748c0d0858",
        "repeating": true,
        "locations": [
          "/"
        ],
        "type": "http://schema.org/Organization",
        "javascript": null,
        "entityIdRef": null,
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./descendant::img[contains(@src,'logo')]/@src"
                }
              ]
            },
            "name": "http://schema.org/image",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./descendant::img[contains(@src,'logo')]/@alt"
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./descendant::img[contains(@src,'logo')]/parent::a/@href"
                }
              ]
            },
            "name": "http://schema.org/url",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "URL"
            ],
            "mandatory": false
          }
        ]
      },
      {
        "id": "fb8e35e4-0fed-4967-8b91-05020aebfce6",
        "repeating": true,
        "locations": [
          "/"
        ],
        "type": "http://schema.org/PriceSpecification",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "substring-after(/descendant::p[contains(.,\"AMOUNT DUE NOW:\")], \"AMOUNT DUE NOW:\")"
                },
                {
                  "xpath": "substring-after(/descendant::p[contains(.,\"amount of $\")], \"amount of\")"
                },
                {
                  "xpath": "substring-after(/descendant::p[contains(.,\"payment of $\")], \"payment of\")"
                },
                {
                  "xpath": "substring-after(/descendant::p[contains(.,\"Amount Past Due:\")], \"Amount Past Due:\")"
                },
                {
                  "xpath": "/descendant::tr[contains(.,\"Amount\")][2]/following::tr/descendant::td[2]"
                }
              ]
            },
            "name": "http://schema.org/price",
            "relative": true,
            "transient": false,
            "javascript": "function transform(data){\n  if(data.match(/\\$[\\d\\,\\.]{4,}/)){\n    var price = data.replace(/\\$/,'')\n    var amt = parseFloat(price.match(/[\\$\\d\\,\\.]+/)[0].replace(/,/,'')).toFixed(2);\n    return amt;\n  }\n  \n  if (data.match(/\\d{1,}\\.\\d{2}/)) return data;\n  \n  return null;\n}",
            "dataTypes": [
              "Number"
            ],
            "mandatory": false
          },
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "\"USD\""
                }
              ]
            },
            "name": "http://schema.org/priceCurrency",
            "relative": true,
            "transient": false,
            "javascript": null,
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      },
      {
        "id": "0f742efb-194f-4680-8d5d-c46e93e85966",
        "repeating": true,
        "locations": [
          "/"
        ],
        "type": "http://schema.org/Person",
        "javascript": null,
        "entityIdRef": "",
        "attributes": [
          {
            "repeating": false,
            "locations": {
              "-1": [
                {
                  "xpath": "./descendant::p[contains(.,'Dear')]"
                }
              ]
            },
            "name": "http://schema.org/name",
            "relative": true,
            "transient": false,
            "javascript": "function transform (data){\n  \tif (data.match(/,/)){\n\t\treturn data.replace(/Hello|Hi|Dear/,\"\").split(/,/)[0].trim();\n    }\n  \telse return data;\n}",
            "dataTypes": [
              "Text"
            ],
            "mandatory": false
          }
        ]
      }
    ],
    "edgeRules": [
      {
        "from": {
          "entityRule": "931e95e6-6011-491a-81b9-ee2246fb0554",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "21d6d9d2-73d1-450e-83c6-9fd9bf601d24",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/minimumPaymentDue",
        "cardinality": "ONE_TO_ONE"
      },
      {
        "from": {
          "entityRule": "931e95e6-6011-491a-81b9-ee2246fb0554",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "d5f6938e-6765-404f-b8c7-b5748c0d0858",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/provider",
        "cardinality": "ONE_TO_ONE"
      },
      {
        "from": {
          "entityRule": "931e95e6-6011-491a-81b9-ee2246fb0554",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "0f742efb-194f-4680-8d5d-c46e93e85966",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/customer",
        "cardinality": "ONE_TO_ONE"
      },
      {
        "from": {
          "entityRule": "931e95e6-6011-491a-81b9-ee2246fb0554",
          "matchAttr": ""
        },
        "to": {
          "entityRule": "fb8e35e4-0fed-4967-8b91-05020aebfce6",
          "matchAttr": ""
        },
        "predicate": "http://schema.org/totalPaymentDue",
        "cardinality": "ONE_TO_ONE"
      }
    ],
    "entityNS": null
  },
  "metaData": {
    "useVTDXML": "true",
    "ignoredValidations": null
  }
}
